parameters:

services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  _instanceof:
    App\Infrastructure\Repository\AbstractRepository:
      tags: ['paella_core.repository']

  App\:
    resource: '../src/*'
    exclude: '../src/{Entity,Migrations,Tests,Kernel.php}'

  App\Http\Controller\:
    resource: '../src/Http/Controller'
    tags: ['controller.service_arguments']

  paella_core.pdo:
    class: \PDO
    arguments:
      - 'mysql:dbname=%env(DATABASE_NAME)%;host=%env(DATABASE_HOST)%'
      - '%env(DATABASE_USERNAME)%'
      - '%env(DATABASE_PASSWORD)%'

  App\DomainModel\Order\OrderRepositoryInterface: '@App\Infrastructure\Repository\OrderRepository'
  App\DomainModel\Order\AddressRepositoryInterface: '@App\Infrastructure\Repository\AddressRepository'
  App\DomainModel\Order\PersonRepositoryInterface: '@App\Infrastructure\Repository\PersonRepository'
  App\DomainModel\Customer\CustomerRepositoryInterface: '@App\Infrastructure\Repository\CustomerRepository'
