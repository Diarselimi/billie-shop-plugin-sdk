security:
    providers:
        in_memory: { memory: ~ }
    firewalls:
        dev:
            pattern: ^/(_(profiler|wdt)|css|images|js)/
            security: false

        healthcheck:
            pattern: ^/healthcheck
            security: false

        private_api:
            pattern: ^/private/*
            security: false

        api_docs:
            pattern: ^/(docs|internal-docs)(/.*)?
            security: false

        merchant_user_login:
            pattern: ^/(public/)?merchant/user/login
            security: false

        merchant_user_logout:
            pattern: ^/(public/)?merchant/user/logout
            anonymous: false
            stateless: true
            guard:
                authenticators:
                    - App\Http\Authentication\Authenticator\OAuthTokenAuthenticator

        legal_forms:
            pattern: ^/(public/)?legal-forms
            security: false

        checkout_authorize:
            pattern: ^/(public/)?checkout-session/.*/authorize
            anonymous: false
            stateless: true
            guard:
                authenticators:
                    - App\Http\Authentication\Authenticator\CheckoutSessionAuthenticator

        invited_user:
            pattern: ^/(public/)?merchant/users/invitations/([a-z0-9])+/(signup|details)$
            methods: [GET, POST, OPTIONS]
            anonymous: false
            stateless: true
            guard:
                authenticators:
                    - App\Http\Authentication\Authenticator\InvitedUserTokenAuthenticator

        default_security:
            anonymous: false
            stateless: true
            guard:
                authenticators:
                    - App\Http\Authentication\Authenticator\OAuthTokenAuthenticator
                    - App\Http\Authentication\Authenticator\ApiKeyAuthenticator
                entry_point: App\Http\Authentication\Authenticator\OAuthTokenAuthenticator

