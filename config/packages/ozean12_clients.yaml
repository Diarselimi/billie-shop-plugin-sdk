ozean12_graphql_client:
  dsn: '%env(GRAPHQL_ENDPOINT)%'
  api_key: "%env(GRAPHQL_API_KEY)%"

services:
  Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner: ~
  Ozean12\Support\HttpClient\JsonResponseDeserializer: ~

  ## Banco (autogenerated SDK)
  public_bank_api:
    class: Ozean12\BancoSDK\Api\BankApi
    arguments:
      - '@eight_points_guzzle.client.banco'
      - !service
        class: 'Ozean12\BancoSDK\Configuration'
        calls:
          - setHost: [ '%banco_public_api_url%' ]

  private_bank_api:
    class: Ozean12\BancoSDK\Api\BankApi
    arguments:
      - '@eight_points_guzzle.client.banco'
      - !service
        class: 'Ozean12\BancoSDK\Configuration'
        calls:
          - setHost: [ '%banco_private_api_url%' ]

  ## SEPA
  Ozean12\Sepa\Client\DomainModel\Mandate\SepaMandateFactory: ~
  Ozean12\Sepa\Client\Infrastructure\SepaClient:
    arguments:
      - '@eight_points_guzzle.client.sepa'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
      - '@Ozean12\Sepa\Client\DomainModel\Mandate\SepaMandateFactory'
  Ozean12\Sepa\Client\DomainModel\SepaClientInterface: '@Ozean12\Sepa\Client\Infrastructure\SepaClient'

  ## Borscht
  Ozean12\Borscht\Client\Infrastructure\BorschtClient:
    arguments:
      - '@eight_points_guzzle.client.borscht'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
  Ozean12\Borscht\Client\DomainModel\BorschtClientInterface: '@Ozean12\Borscht\Client\Infrastructure\BorschtClient'

  ## Watson
  Ozean12\Watson\Client\Infrastructure\WatsonClient:
    arguments:
      - '@eight_points_guzzle.client.watson'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
  Ozean12\Watson\Client\DomainModel\WatsonClientInterface: '@Ozean12\Watson\Client\Infrastructure\WatsonClient'

  ## Invoice butler
  Ozean12\InvoiceButler\Client\Infrastructure\InvoiceButlerClient:
    arguments:
      - '@eight_points_guzzle.client.invoice_butler'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
  Ozean12\InvoiceButler\Client\DomainModel\InvoiceButlerClientInterface: '@Ozean12\InvoiceButler\Client\Infrastructure\InvoiceButlerClient'
