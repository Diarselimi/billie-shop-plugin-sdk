ozean12_graphql_client:
  dsn: '%env(GRAPHQL_ENDPOINT)%'
  api_key: "%env(GRAPHQL_API_KEY)%"

services:
  Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner: ~
  Ozean12\Support\HttpClient\JsonResponseDeserializer: ~

  ## Banco (autogenerated SDK)
  Ozean12\BancoSDK\Api\BankApi:
    arguments:
      - '@eight_points_guzzle.client.banco'
      - '@App\Infrastructure\Banco\BancoSdkConfig'

  ## SEPA
  Ozean12\Sepa\Client\DomainModel\Mandate\SepaMandateFactory: ~
  Ozean12\Sepa\Client\Infrastructure\SepaClient:
    arguments:
      - '@eight_points_guzzle.client.sepa'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
      - '@Ozean12\Sepa\Client\DomainModel\Mandate\SepaMandateFactory'
  Ozean12\Sepa\Client\DomainModel\SepaClientInterface: '@Ozean12\Sepa\Client\Infrastructure\SepaClient'

  ## Borscht
  Ozean12\Borscht\Client\Infrastructure\BorschtClient:
    arguments:
      - '@eight_points_guzzle.client.borscht'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
  Ozean12\Borscht\Client\DomainModel\BorschtClientInterface: '@Ozean12\Borscht\Client\Infrastructure\BorschtClient'
