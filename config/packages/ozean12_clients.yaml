ozean12_graphql_client:
  dsn: '%env(GRAPHQL_ENDPOINT)%'
  api_key: "%env(GRAPHQL_API_KEY)%"

services:
  Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner: ~
  Ozean12\Support\HttpClient\JsonResponseDeserializer: ~

  ## Banco (autogenerated SDK)
  Ozean12\BancoSDK\Configuration:
    calls:
      - setHost: [ '%banco_url%' ]
  Ozean12\BancoSDK\Api\BankApi:
    arguments:
      - '@eight_points_guzzle.client.banco'
      - '@Ozean12\BancoSDK\Configuration'


  ## SEPA
  Ozean12\Sepa\Client\DomainModel\Mandate\SepaMandateFactory: ~
  Ozean12\Sepa\Client\Infrastructure\SepaClient:
    arguments:
      - '@eight_points_guzzle.client.sepa'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
      - '@Ozean12\Sepa\Client\DomainModel\Mandate\SepaMandateFactory'
  Ozean12\Sepa\Client\DomainModel\SepaClientInterface: '@Ozean12\Sepa\Client\Infrastructure\SepaClient'

  ## Borscht
  Ozean12\Borscht\Client\Infrastructure\BorschtClient:
    arguments:
      - '@eight_points_guzzle.client.borscht'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
  Ozean12\Borscht\Client\DomainModel\BorschtClientInterface: '@Ozean12\Borscht\Client\Infrastructure\BorschtClient'

  ## Smaug
  Ozean12\Smaug\Client\SmaugClient:
    arguments:
      - '@eight_points_guzzle.client.smaug'
  Ozean12\Smaug\Client\SmaugClientInterface: '@Ozean12\Smaug\Client\SmaugClient'

  ## Invoice butler
  Ozean12\InvoiceButler\Client\Infrastructure\InvoiceButlerClient:
    arguments:
      - '@eight_points_guzzle.client.invoice_butler'
      - '@Ozean12\Support\HttpClient\JsonResponseDeserializer'
      - '@Ozean12\Support\FlowControl\RetryOnFailure\RetryableCallbackRunner'
  Ozean12\InvoiceButler\Client\DomainModel\InvoiceButlerClientInterface: '@Ozean12\InvoiceButler\Client\Infrastructure\InvoiceButlerClient'
