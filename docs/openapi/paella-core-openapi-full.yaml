openapi: 3.0.0
info:
  title: 'Billie Boost API Documentation'
  description: |
    # Introduction

    With PayAfterDelivery (PAD) / "Rechnungskauf" Billie offers a convenient, secure and simple way to allow your B2B-customers
    to pay on invoice. Our solution enables merchants to accept invoice payments from other business customers without waiting for their money,
    reminding customers about the payment, or assuming credit risk.

    The following documentation describes our RESTFul API, which allows easy integration into your web-shop,
    eCommerce platform or invoicing back-end.

    Based upon your Billie contract, your customers will have between 7 and 120 days (payment term) to pay your invoices, while Billie will 
    transfer the money to you immediately after shipment of goods or fulfilment of service obligation. For outstanding payments, 
    Billie takes over reminding customers on your behalf (white-label solution). Additionally, Billie protects you from credit risks 
    by absorbing any potential debtor defaults.

    ---
    ## Order State Transitions

    ![img](src/Resources/docs/orders-workflow-public.png)

    ## Order States

    | State         | Description                                                                                   |
    |---------------|-----------------------------------------------------------------------------------------------|
    | waiting       | The order creation failed and needs a manual operation in order to be approved or declined    |
    | authorized    | State of an order after creating it via the checkout widget. For approval, it needs merchant-side confirmation.    |
    | created       | The order is successfully approved and Billie can offer financing for this transaction        |
    | declined      | The order was declined and no financing is offered for this transaction                       |
    | shipped       | The order was successfully shipped by the merchant                                            |
    | paid_out      | The outstanding amount for the respective order was successfully paid out to the merchant     |
    | late          | The payment of the outstanding amount is overdue                                              |
    | complete      | The outstanding amount was successfully paid back by the customer                             |
    | canceled      | The order was canceled by the merchant       


    ## Order Decline Reasons

    An order could be declined by any of these reasons:

    | Reason                | Description                                               |
    |-----------------------|-----------------------------------------------------------|
    | debtor_address        | Debtor address or name mismatch                           |
    | debtor_not_identified | Debtor could not be identified with the information given |
    | risk_policy           | Risk decline                                              |
    | risk_scoring_failed   | Not enough data available to make a decision              |
    | debtor_limit_exceeded | Financing limit of debtor currently exceeded              |


    ## Usage of Virtual IBANs

    Since payouts by Billie to the merchant are made immediately after shipment of goods or delivery of the agreed service, customers need to 
    pay back their invoices directly to Billie upon due date. Therefore, Billie is using so-called virtual IBANs (VIBANs).
    VIBANs are delivered back to the merchant as response to an (accepted) order creation request. VIBANs are unique for each of your 
    debtor / customer. The VIBAN needs to be put on the invoice which the customer receives for the purchase.
  termsOfService: 'https://www.billie.io/agb/'
  license:
    name: 'Â© Billie GmbH, 2020'
    url: 'https://www.billie.io/agb/'
  version: v2021.04
  x-logo:
    url: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkViZW5lXzJfS29waWUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIKCSB5PSIwcHgiIHZpZXdCb3g9IjAgMCA0OC41IDY3LjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4LjUgNjcuNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtkaXNwbGF5Om5vbmU7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDo3O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCS5zdDF7ZmlsbDojMUYyNTMwO30KCS5zdDJ7ZmlsbDpub25lO30KCS5zdDN7ZGlzcGxheTpub25lO2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQoJLnN0NHtmb250LWZhbWlseTonQXZlbmlyTmV4dC1EZW1pQm9sZCc7fQoJLnN0NXtmb250LXNpemU6My4wMzAzcHg7fQoJLnN0NntsZXR0ZXItc3BhY2luZzoyO30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCw0Ni4xYy0wLjUsMCwyNS4xLTEyLjYsMjUuMS0zMi43YzAtNi45LTUuNi0xMi42LTEyLjYtMTIuNlM5LjcsNi41LDkuNywxMy40TDkuOCw0Ni4xaDE4LjUKCWM2LjksMCwxMi42LTUuNiwxMi42LTEyLjZTMzUuMiwyMSwyOC4yLDIxSDkuNyIvPgo8Zz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yOC4yLDQ3SDguOHYtMC44YzAtMC4xLDAtMC4yLDAtMC4zVjEzLjVDOC44LDYsMTQuOSwwLDIyLjMsMHMxMy41LDYsMTMuNSwxMy41YzAsMi44LTAuNSw1LjUtMS40LDguMgoJCWM0LjMsMi4yLDcuMyw2LjcsNy4zLDExLjlDNDEuNyw0MSwzNS42LDQ3LDI4LjIsNDd6IE0xMi45LDQ1LjJoMTUuM2M2LjQsMCwxMS43LTUuMywxMS43LTExLjdjMC00LjQtMi41LTguMy02LjEtMTAuMwoJCWMtMS44LDQuNC00LjgsOC43LTksMTIuOEMyMC40LDQwLjQsMTUuOCw0My41LDEyLjksNDUuMnogTTEwLjYsMjEuOXYyMi43YzEzLTcuNywxOC45LTE1LjYsMjEuNS0yMmMtMS4yLTAuNC0yLjUtMC43LTMuOS0wLjdIMTAuNgoJCXogTTEwLjYsMjAuMWgxNy42YzEuNiwwLDMuMSwwLjMsNC41LDAuOGMxLTIuOSwxLjMtNS41LDEuMy03LjRDMzQsNywyOC44LDEuOCwyMi4zLDEuOFMxMC42LDcsMTAuNiwxMy41VjIwLjF6Ii8+CjwvZz4KPHJlY3QgeD0iLTExLjEiIHk9Ii01OC43IiBjbGFzcz0ic3QyIiB3aWR0aD0iODUuNCIgaGVpZ2h0PSI0OS41Ii8+Cjx0ZXh0IHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIDEgLTEuMDQyNCA2Ny41NzcyKSIgY2xhc3M9InN0MyBzdDQgc3Q1IHN0NiI+QklMTElFPC90ZXh0Pgo8Zz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0wLDU4LjFoMy43YzAuNCwwLDAuNywwLjEsMS4xLDAuMWMwLjQsMC4xLDAuNywwLjIsMC45LDAuNGMwLjMsMC4yLDAuNSwwLjQsMC43LDAuN2MwLjIsMC4zLDAuMywwLjcsMC4zLDEuMQoJCWMwLDAuNS0wLjIsMS0wLjUsMS4zYy0wLjMsMC40LTAuNywwLjYtMS4yLDAuOHYwYzAuNiwwLjEsMS4xLDAuMywxLjUsMC43QzYuOCw2My42LDcsNjQuMiw3LDY0LjhjMCwwLjUtMC4xLDEtMC4zLDEuMwoJCWMtMC4yLDAuNC0wLjUsMC42LTAuOCwwLjljLTAuMywwLjItMC43LDAuNC0xLjIsMC41Yy0wLjQsMC4xLTAuOSwwLjItMS4zLDAuMkgwQzAsNjcuNiwwLDU4LjEsMCw1OC4xeiBNMS43LDYyaDEuNQoJCWMwLjYsMCwxLTAuMSwxLjMtMC4zYzAuMy0wLjIsMC40LTAuNSwwLjQtMWMwLTAuNC0wLjItMC43LTAuNS0wLjljLTAuMy0wLjItMC44LTAuMy0xLjQtMC4zSDEuN0wxLjcsNjJMMS43LDYyeiBNMS43LDY2LjFoMS41CgkJYzAuMiwwLDAuNSwwLDAuNy0wLjFzMC41LTAuMSwwLjctMC4yYzAuMi0wLjEsMC40LTAuMywwLjUtMC40YzAuMS0wLjIsMC4yLTAuNCwwLjItMC44YzAtMC41LTAuMi0wLjktMC41LTEKCQljLTAuMy0wLjItMC45LTAuMy0xLjUtMC4zSDEuN1Y2Ni4xeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTExLjEsNTguMWgxLjd2OS41aC0xLjdWNTguMXoiLz4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNy4zLDU4LjFoMS43djhoNHYxLjVoLTUuN1Y1OC4xeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTI2LjUsNTguMWgxLjd2OGg0djEuNWgtNS43TDI2LjUsNTguMUwyNi41LDU4LjF6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzUuNyw1OC4xaDEuN3Y5LjVoLTEuN1Y1OC4xeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxLjksNTguMWg2LjN2MS41aC00LjZWNjJINDh2MS40aC00LjNWNjZoNC44djEuNWgtNi41VjU4LjF6Ii8+CjwvZz4KPC9zdmc+Cg=='
    href: '#'
servers:
  -
    url: 'http://paella-core.test{num}.ozean12.com'
    description: 'Test API (No Gateway)'
    variables:
      num:
        enum:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
          - '6'
          - '7'
          - '8'
          - '9'
          - '10'
          - '11'
          - '12'
          - '13'
          - '14'
          - '15'
          - '16'
          - '17'
          - '18'
          - '19'
        default: '16'
        description: 'Test Server Instance'
    x-groups:
      - support
      - salesforce
  -
    url: 'https://private-api.paella.ozean12.com/test-{num}'
    description: 'Test Private API (AWS Gateway)'
    variables:
      instance:
        default: XXXXX
        description: 'AWS Gateway instance ID'
      num:
        enum:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
          - '6'
          - '7'
          - '8'
          - '9'
          - '10'
          - '11'
          - '12'
          - '13'
          - '14'
          - '15'
          - '16'
          - '17'
          - '18'
          - '19'
        default: '16'
        description: 'Test Server Instance'
    x-groups:
      - support
      - salesforce
  -
    url: 'https://paella-private-api.billie.io/api'
    description: 'Production Private API (AWS Gateway)'
    x-groups:
      - support
      - salesforce
  -
    url: 'https://paella-sandbox.billie.io/api/v1'
    description: 'Test Sandbox API'
  -
    url: 'https://paella.billie.io/api/v1'
    description: 'Production API'
paths:
  /healthcheck:
    get:
      tags:
        - Support
      summary: 'API Status'
      description: 'Check the status of the API server.'
      operationId: api_status
      responses:
        '200':
          description: Successful
          content:
            text/plain:
              schema:
                type: string
                default: 'paella_core is alive'
  /oauth/token:
    post:
      tags:
        - Authentication
      summary: 'Request OAuth Token'
      description: |-
        <!-- Grants documentation taken from: https://oauth2.thephpleague.com/ -->

        ### Flow

        The client sends a POST request with following body parameters to the authorization server:

        * `grant_type` with the value `client_credentials`
        * `client_id` with the client's ID
        * `client_secret` with the client's secret

        The authorization server will respond with a JSON object containing the following properties:

        * `token_type` with the value `Bearer`
        * `expires_in` with an integer representing the TTL (in seconds) of the access token (Default is 8 hours)
        * `access_token` a JWT signed with the authorization server's private key

        The `access_token` should be used in the `Authorization` header together with the `Bearer` challenge to authenticate all the requests.

        > Example: `Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`.
      operationId: oauth_token_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OauthClientCredentialsGrantRequestBodyParams'
      responses:
        '200':
          description: Successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OauthTokenResponseBody'
  /oauth/authorization:
    get:
      tags:
        - Authentication
      summary: 'Validate OAuth Token'
      description: |-
        Validates the `Authorization: Bearer XXXX` OAuth 2.0 token header and returns a successful response
        with `client_id` and `user_id` or fails if it's invalid.
      operationId: oauth_token_validate
      responses:
        '200':
          description: Successful
          content:
            application/json:
              schema:
                required:
                  - client_id
                  - scopes
                properties:
                  client_id: { $ref: '#/components/schemas/UUID' }
                  scopes: { type: array, items: { type: string }, default: [] }
                type: object
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          $ref: '#/components/responses/ServerError'
  /internal-docs:
    get:
      tags:
        - 'API Docs'
      summary: 'Internal API Docs (default)'
      operationId: docs_internal_get_default
      parameters:
        -
          name: embed
          in: query
          description: 'Use inline JSON instead of the external file'
          required: false
          schema:
            type: boolean
          example: 1
        -
          name: nocache
          in: query
          description: 'Do not send cache headers to the client'
          required: false
          schema:
            type: boolean
          example: 1
      responses:
        '200':
          $ref: '#/components/responses/HtmlDocument'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /internal-docs/billie-pad-openapi.yaml:
    get:
      tags:
        - 'API Docs'
      summary: 'Internal API Specs'
      operationId: docs_internal_get_specs
      parameters:
        -
          name: nocache
          in: query
          description: 'Do not send cache headers to the client'
          required: false
          schema:
            type: boolean
          example: 1
      responses:
        '200':
          $ref: '#/components/responses/YamlDocument'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /docs:
    get:
      tags:
        - 'API Docs'
      summary: 'Public API Docs (default)'
      operationId: docs_get_default
      parameters:
        -
          name: embed
          in: query
          description: 'Use inline JSON instead of the external file'
          required: false
          schema:
            type: boolean
          example: 1
        -
          name: nocache
          in: query
          description: 'Do not send cache headers to the client'
          required: false
          schema:
            type: boolean
          example: 1
      responses:
        '200':
          $ref: '#/components/responses/HtmlDocument'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /docs/billie-pad-openapi.yaml:
    get:
      tags:
        - 'API Docs'
      summary: 'Public API Specs'
      operationId: docs_get_specs
      parameters:
        -
          name: nocache
          in: query
          description: 'Do not send cache headers to the client'
          required: false
          schema:
            type: boolean
          example: 1
      responses:
        '200':
          $ref: '#/components/responses/YamlDocument'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /docs/v2:
    get:
      tags:
        - 'API Docs'
      summary: 'Public API Docs (default)'
      operationId: docs_v2_get_default
      parameters:
        -
          name: embed
          in: query
          description: 'Use inline JSON instead of the external file'
          required: false
          schema:
            type: boolean
          example: 1
        -
          name: nocache
          in: query
          description: 'Do not send cache headers to the client'
          required: false
          schema:
            type: boolean
          example: 1
      responses:
        '200':
          $ref: '#/components/responses/HtmlDocument'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /docs/v2/billie-pad-openapi.yaml:
    get:
      tags:
        - 'API Docs'
      summary: 'Public API Specs'
      operationId: docs_v2_get_specs
      parameters:
        -
          name: nocache
          in: query
          description: 'Do not send cache headers to the client'
          required: false
          schema:
            type: boolean
          example: 1
      responses:
        '200':
          $ref: '#/components/responses/YamlDocument'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/order/{uuid}/approve':
    post:
      tags:
        - Support
      summary: 'Approve Order in Waiting State'
      description: 'Approves an order manually if it''s in waiting state. Otherwise this call fails.'
      operationId: order_approve
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '204':
          description: 'Order approved.'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
  /authorize-sandbox:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Authorize sandbox'
      description: 'Authorize production users for a sandbox'
      operationId: authorize-sandbox
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthorizeSandboxDTO'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
  /merchant:
    post:
      tags:
        - Support
      summary: 'Create Merchant'
      operationId: merchant_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMerchantRequest'
      responses:
        '201':
          description: 'Merchant successfully created'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateMerchantResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: 'Request conflicts with the current state of the server.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorsObject'
        '500':
          $ref: '#/components/responses/ServerError'
  /merchant/with-company:
    post:
      tags:
        - Support
      summary: 'Create Merchant with Company'
      description: |-
        Creates a new Merchant and a new Company associated to it.
         *          No company identification process is triggered, the company is created directly with the provided data as-it-is.
      operationId: create_merchant_with_company
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMerchantWithCompanyRequest'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateMerchantResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/order/{uuid}/add-invoice':
    post:
      tags:
        - Support
      summary: 'Create Order Invoice'
      description: |-
        (Automated) Creates a new invoice, linking an order with a file. Called automatically by the
         *     invoice uploader Lambda service.
      operationId: order_create_invoice
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - file_id
                - invoice_number
              properties:
                invoice_uuid: {  }
                file_uuid: {  }
                file_id:
                  description: 'File ID in the Nachos file service.'
                  type: integer
                invoice_number:
                  description: 'Invoice number provided by the merchant.'
                  $ref: '#/components/schemas/TinyText'
              type: object
      responses:
        '201':
          description: 'Order invoice successfully created'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/debtors/{companyUuid}/whitelist':
    post:
      tags:
        - Support
      summary: 'Whitelist Debtor'
      operationId: whitelist_debtor
      parameters:
        -
          name: companyUuid
          in: path
          description: 'Company UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                is_whitelisted:
                  type: boolean
                  nullable: false
              type: object
      responses:
        '204':
          description: 'Debtor is_whitelisted flag is saved.'
        '404':
          description: 'Company not found.'
        '500':
          $ref: '#/components/responses/ServerError'
  '/order/{uuid}/decline':
    post:
      tags:
        - Support
      summary: 'Decline Order in Waiting State'
      operationId: order_decline
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '204':
          description: 'Order declined.'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
  '/debtor-company/{uuid}/limits':
    get:
      tags:
        - Support
      summary: 'Get Debtor Company Limits'
      operationId: get_debtor_company_limits
      parameters:
        -
          name: uuid
          in: path
          description: 'Company UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetDebtorCompanyLimitsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant/{identifier}':
    get:
      tags:
        - Support
      summary: 'Get Merchant'
      operationId: merchant_get
      parameters:
        -
          name: identifier
          in: path
          description: 'Merchant ID or Merchant Payment Uuid'
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Merchant Entity'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantEntity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant-debtor/{debtorUuid}':
    get:
      tags:
        - Support
      summary: 'Get Debtor Details (Extended)'
      operationId: debtor_get_details_extended
      parameters:
        -
          name: debtorUuid
          in: path
          description: 'Merchant-Debtor UUID'
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Debtor Extended Info'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantDebtorExtendedResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /publish-to-amqp:
    post:
      summary: 'Publish a message to the amqp broker'
      operationId: publish_to_amqp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                class_name:
                  description: 'What message to publish'
                  type: string
                json:
                  description: 'Message''s body'
                  type: object
              type: object
      responses:
        '202':
          description: 'Successful response'
        '500':
          $ref: '#/components/responses/ServerError'
  '/order/{uuid}/identify-debtor':
    get:
      tags:
        - Support
      summary: 'Identify Order Debtor'
      operationId: order_identify_debtor
      parameters:
        -
          name: uuid
          in: path
          description: 'Order Uuid'
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Debtor Entity'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDebtorIdentificationV2Response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /merchant-debtor/mark-duplicates:
    post:
      tags:
        - Support
      summary: 'Mark Merchant Debtor Duplicates'
      operationId: mark_duplicate_debtors
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                duplicates:
                  type: array
                  items: { $ref: '#/components/schemas/MarkDuplicateDebtorItem' }
                  nullable: false
              type: object
      responses:
        '204':
          description: 'Merchant debtor is marked as duplicate'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant/{uuid}/onboarding-step/transition':
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Merchant Onboarding Step Transition'
      operationId: merchant_onboarding_step_transition_update
      parameters:
        -
          name: uuid
          in: path
          description: 'Merchant Payment UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantOnboardingStepTransitionRequest'
      responses:
        '204':
          description: 'State changed successfully.'
        '400':
          description: 'Transition not supported'
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 'Step not found'
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant/{uuid}/onboarding/transition':
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Merchant Onboarding Transition'
      operationId: merchant_onboarding_transition_change
      parameters:
        -
          name: uuid
          in: path
          description: 'Merchant Payment UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantOnboardingTransitionRequest'
      responses:
        '204':
          description: 'Onboarding state changed successfully.'
        '400':
          description: 'Transition not supported'
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 'Merchant not found'
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /merchant/registration:
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Merchant Registration'
      operationId: merchant_registration
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterMerchantRequest'
      responses:
        '201':
          description: 'Merchant registered successfully'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterMerchantResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/ResourceConflict'
        '404':
          description: 'Company not found'
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant/{merchantId}/user':
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Register Merchant User'
      operationId: register_merchant_user
      parameters:
        -
          name: merchantId
          in: path
          description: 'Merchant ID'
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterMerchantUserRequest'
      responses:
        '201':
          description: 'Merchant user was successfully registered'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant-debtor/{merchantDebtorUuid}/synchronize':
    post:
      tags:
        - Support
      summary: 'Synchronize merchant_debtor address.'
      operationId: synchronize_merchant_debtor
      parameters:
        -
          name: merchantDebtorUuid
          in: path
          description: 'Mechant Debtor UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Debtor synchronized successfully'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantDebtorSynchronizationResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/order/{uuid}/trigger-failed-notifications':
    post:
      tags:
        - Support
      summary: 'Trigger all failed order notifications'
      operationId: trigger_failed_order_notifications
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '204':
          description: 'Order failed notifications were triggered successfully.'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant-debtor/{debtorUuid}/update-company':
    post:
      tags:
        - Support
      summary: 'Updat Merchant Debtor Company'
      operationId: update_merchant_debtor_company
      parameters:
        -
          name: debtorUuid
          in: path
          description: 'Merchant-Debtor UUID'
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMerchantDebtorCompanyRequest'
      responses:
        '204':
          description: 'Merchant debtor company updated'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/merchant-debtor/{debtorUuid}/update-limit':
    post:
      tags:
        - Support
      summary: 'Update Merchant Debtor Limit'
      operationId: update_merchant_debtor_limit
      parameters:
        -
          name: debtorUuid
          in: path
          description: 'Merchant Debtor UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                financing_limit:
                  description: 'New financing limit.'
                  type: number
                  format: float
              type: object
      responses:
        '204':
          description: 'Successful response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/order/{id}/cancel':
    post:
      tags:
        - 'Order Management'
      summary: 'Cancel Order'
      description: 'This call initiates a full order cancellation.'
      operationId: order_cancel
      parameters:
        -
          name: id
          in: path
          description: 'Order ID or UUID'
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: 'Order successfully cancelled'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/invoices/{uuid}/check-owner':
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Check invoice owner'
      operationId: check_invoice_owner
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'Invoice is owned by merchant'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/checkout-session/{sessionUuid}/authorize':
    put:
      tags:
        - 'Checkout Client'
      summary: 'Checkout Session Authorize'
      description: 'Authorizes an existing checkout session, completing all missing order data.'
      operationId: checkout_session_authorize
      parameters:
        -
          name: sessionUuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '200':
          description: 'Order created with ''authorized'' state, but a merchant confirmation is needed.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CheckoutAuthorizeOrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
  '/checkout-session/{sessionUuid}/confirm':
    put:
      tags:
        - 'Checkout Server'
      summary: 'Checkout Session Confirm'
      description: 'Confirms the creation of an existing checkout session.'
      operationId: checkout_session_confirm
      parameters:
        -
          name: sessionUuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckoutConfirmOrderRequest'
      responses:
        '202':
          description: 'Order data successfully confirmed'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /checkout-session:
    post:
      tags:
        - 'Checkout Server'
      summary: 'Checkout Session Create'
      description: 'Initializes a new Billie Checkout session for the given customer.'
      operationId: checkout_session_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                merchant_customer_id:
                  description: 'Debtor ID in the merchant system.'
                  $ref: '#/components/schemas/TinyText'
              type: object
      responses:
        '200':
          description: 'Checkout session created.'
          content:
            application/json:
              schema:
                required:
                  - id
                properties:
                  id: { description: 'Checkout Session Token', $ref: '#/components/schemas/UUID' }
                type: object
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/checkout-session/{sessionUuid}/update':
    post:
      tags:
        - 'Checkout Client'
      summary: 'Checkout Session Update'
      operationId: checkout_session_update
      parameters:
        -
          name: sessionUuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckoutUpdateOrderRequest'
      responses:
        '204':
          description: 'Order data successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order/{id}/confirm-payment':
    post:
      tags:
        - 'Order Management'
      summary: 'Confirm Order Payment'
      description: |-
        This endpoint needs to be called if a customer is accidentally paying the purchase amount 
        directly to the merchant. (See usage of virtual IBANs).

        As a consequence of sending this call, Billie will make a direct debit from the merchant 
        or net it against the potential outstanding payout amount of the very day. 
        Please mind that the order state will only be updated after Billie actually receives 
        the money of the confirmed payment.
      operationId: order_payment_confirm
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/TinyText'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                paid_amount:
                  type: number
                  format: float
                  minimum: 0.1
              type: object
      responses:
        '204':
          description: 'Order payment successfully confirmed'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user/confirm-password-reset:
    get:
      tags:
        - 'Dashboard Users'
      summary: 'Confirm Password Reset'
      operationId: confirm_password_reset
      parameters:
        -
          name: token
          in: query
          description: Token
          required: true
          schema:
            $ref: '#/components/schemas/TinyText'
      responses:
        '204':
          description: 'Password confirm valid'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /order-dashboard:
    post:
      tags:
        - 'Dashboard Order Creation'
      summary: 'Create Order For Dashboard'
      operationId: order_create_dashboard
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '200':
          description: 'Order successfully created'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/users/invitations:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Invite Merchant User'
      operationId: invite_merchant_user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMerchantUserInvitationRequest'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateMerchantUserInvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/ResourceConflict'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /order:
    post:
      tags:
        - 'Back-end Order Creation'
      summary: 'Create Order'
      description: |-
        Authorization of order financing requests.

        Provide with this endpoint relevant information about the customer and the respective purchase to understand if
        Billie can offer financing for this transaction.

        The decision whether or not Billie can accept a specific order is made on a single transaction basis.
        Therefore, orders need to be created to represent a specific transaction for the merchant.
      operationId: order_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
      responses:
        '200':
          description: 'Order successfully created'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/user/{uuid}/deactivate':
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Deactivate User'
      operationId: user_deactivate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeactivateUserRequest'
      responses:
        '204':
          description: 'User successfully deactivated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /external-debtors:
    get:
      tags:
        - 'Dashboard Debtors'
        - 'Checkout Client'
      summary: 'Get External Debtors'
      operationId: external_debtors_get
      parameters:
        -
          name: search
          in: query
          description: 'Search text.'
          required: true
          schema:
            $ref: '#/components/schemas/TinyText'
        -
          name: sessionUuid
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'External Debtors List'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetExternalDebtorsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/users/invitations/{token}/details':
    get:
      tags:
        - 'Dashboard Users'
      summary: 'Get Invited User'
      operationId: get_invited_user_details
      parameters:
        -
          name: token
          in: path
          description: 'Invitation Token'
          required: true
          schema:
            type: string
            maxLength: 36
            example: 689e71e69zk8484k0k0cckkgs08cogk4w0ko
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetInvitedMerchantUserResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/invoices/{uuid}':
    get:
      tags:
        - Invoices
      summary: 'Get Invoice'
      operationId: get_invoice
      parameters:
        -
          name: uuid
          in: path
          description: 'Get Invoice with Uuid'
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Invoice Response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetInvoiceResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
        - Invoices
      summary: 'Cancel Invoice'
      operationId: invoice_cancel_v2
      parameters:
        -
          name: uuid
          in: path
          description: 'Invoice UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '204':
          description: 'Invoice successfully cancelled'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/invoices/{uuid}/payments':
    get:
      tags:
        - 'Order Management'
      summary: 'Get Invoice Payments'
      operationId: get_invoice_payments
      parameters:
        -
          name: uuid
          in: path
          description: 'Invoice UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetInvoicePaymentsResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /legal-forms:
    get:
      tags:
        - 'Back-end Order Creation'
      summary: 'Get Legal Forms'
      operationId: get_legal_forms
      responses:
        '200':
          description: 'List of supported legal forms'
          content:
            application/json:
              schema:
                properties:
                  items: { type: array, items: { properties: { code: { description: 'Legal form code', type: integer, example: '90101' }, name: { description: 'Legal form name', type: string, example: 'AG & Co. KG', nullable: true }, required_input: { description: 'Required input (HR-NR => Registration Number, Ust-ID => Registration ID)', type: string, example: HR-NR }, required: { description: Required, type: boolean } }, type: object } }
                type: object
        '500':
          $ref: '#/components/responses/ServerError'
      security: []
  /merchant/credentials:
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Returns merchant credentials for production and sandbox.'
      description: 'Get Credentials'
      operationId: get_merchant_credentials
      responses:
        '200':
          description: 'Response on success'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantCredentialsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/debtor/{uuid}':
    get:
      tags:
        - 'Dashboard Debtors'
      summary: 'Get Debtor Details'
      operationId: debtor_get_details
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Debtor details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantDebtorResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/debtor/{uuid}/external-ids':
    get:
      tags:
        - 'Dashboard Debtors'
      summary: 'Get Debtor External Ids'
      operationId: debtor_get_external_ids
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Debtor details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantDebtorExternalIdsListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /debtors:
    get:
      tags:
        - 'Dashboard Debtors'
      summary: 'Get Debtors'
      operationId: debtors_get
      parameters:
        -
          name: sort_by
          in: query
          required: false
          schema:
            type: string
            default: 'created_at,desc'
            enum:
              - created_at
              - 'created_at,desc'
              - 'created_at,asc'
              - external_code
              - 'external_code,desc'
              - 'external_code,asc'
              - debtor_information_change_request_state
              - 'debtor_information_change_request_state,desc'
              - 'debtor_information_change_request_state,asc'
        -
          name: offset
          in: query
          required: false
          schema:
            type: integer
            minimum: 0
        -
          name: limit
          in: query
          required: false
          schema:
            type: integer
            maximum: 100
            minimum: 1
        -
          name: search
          in: query
          description: 'Search text. Filters search results by: `external_code`.'
          required: false
          schema:
            $ref: '#/components/schemas/TinyText'
      responses:
        '200':
          description: 'Debtors list'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantDebtorListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/financial-assessment:
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Get Merchant Financial Assessment'
      operationId: get_merchant_financial_assessment
      responses:
        '200':
          description: 'Merchant financial assessment'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantFinancialAssessmentResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Save merchant financial assessment.'
      operationId: save_merchant_financial_assessment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveMerchantFinancialAssessmentRequest'
      responses:
        '204':
          description: 'Financial Assessment saved.'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/ResourceConflict'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /notifications:
    get:
      tags:
        - 'Dashboard Merchant Notifications'
      summary: 'Get Notifications'
      operationId: notifications_get
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantNotificationsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/onboarding:
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Get Merchant Onboarding'
      operationId: get_merchant_onboarding
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantOnboardingResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/payments/{uuid}':
    get:
      tags:
        - 'Dashboard Payments'
      summary: 'Get Payment Details'
      operationId: get_payment_details
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantPaymentDetailsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /payments:
    get:
      tags:
        - 'Dashboard Payments'
      summary: 'Get Payments'
      operationId: get_payments
      parameters:
        -
          name: sort_by
          in: query
          required: false
          schema:
            type: string
            default: priority
            enum:
              - priority
              - date
        -
          name: sort_direction
          in: query
          required: false
          schema:
            type: string
            default: desc
            enum:
              - desc
              - asc
        -
          name: offset
          in: query
          required: false
          schema:
            type: integer
            minimum: 0
        -
          name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 10
            maximum: 100
            minimum: 1
        -
          name: merchant_debtor_uuid
          in: query
          description: 'Merchant Debtor Uuid'
          required: false
          schema:
            $ref: '#/components/schemas/UUID'
        -
          name: search
          in: query
          description: 'Search text.'
          required: false
          schema:
            $ref: '#/components/schemas/TinyText'
        -
          name: filters
          in: query
          required: false
          style: deepObject
          explode: true
          schema:
            properties:
              is_allocated:
                type: boolean
              is_overpayment:
                type: boolean
            type: object
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantPaymentsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/roles:
    get:
      tags:
        - 'User Management'
      summary: 'Get merchant roles'
      description: 'List of all available user roles for the current merchant.'
      operationId: get_merchant_roles
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantRolesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/bank-account/sepa-mandate-document:
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Get Sepa B2B Mandate'
      operationId: get_sepa_b2b_document
      responses:
        '200':
          description: 'The SEPA mandate PDF file contents'
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user:
    get:
      tags:
        - 'Dashboard Users'
      summary: 'Get Merchant User'
      operationId: get_merchant_user
      responses:
        '200':
          description: 'Merchant User details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantUserDTO'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user/identity-verification:
    get:
      tags:
        - 'Dashboard Users'
      summary: 'Get Merchant User Identity Verification'
      operationId: merchant_user_identity_verification
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantUserIdentityVerificationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/users:
    get:
      tags:
        - 'Dashboard Users'
      summary: 'Get Merchant Users'
      operationId: get_merchant_users
      parameters:
        -
          name: sort_by
          in: query
          required: false
          schema:
            type: string
            default: invitation_status
            enum:
              - invitation_status
              - 'invitation_status,desc'
              - 'invitation_status,asc'
              - created_at
              - 'created_at,desc'
              - 'created_at,asc'
        -
          name: offset
          in: query
          required: false
          schema:
            type: integer
            minimum: 0
        -
          name: limit
          in: query
          required: false
          schema:
            type: integer
            maximum: 100
            minimum: 1
      responses:
        '200':
          description: 'Users list'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetMerchantUsersResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order/{id}':
    get:
      tags:
        - 'Order Management'
      summary: 'Get Order Details'
      description: |-
        Retrieves information about an order.

        Get relevant information about an order (e.g. in order to understand, if a specific order was already repaid 
        by your customer).
      operationId: order_get_details
      parameters:
        -
          name: id
          in: path
          description: 'Order external code or UUID'
          required: true
          schema:
            oneOf:
              -
                $ref: '#/components/schemas/UUID'
              -
                type: string
      responses:
        '200':
          description: 'Order details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
    patch:
      tags:
        - 'Order Management'
      summary: 'Update Order'
      description: |-
        Updates an order if changes are necessary. 
        The following information can be updated until the order reached state complete:

        - order amount: decrease the order amount (mostly due to partial cancellations of a purchase), always possible 
          unless the order is already fully paid.
        - duration: extend timeframe for a payment. This changes the due date (Â§1).
        - invoice details like invoice number and document URL.


        Â§1 This call can also be used to move the due date into the future. This is possible from the moment the shipment is 
        confirmed until the last day before reaching the current due date.

        The new duration is to be set (i.e. initial request for 30 days, shipment on the 01.01., due date = 31.01., 
        update duration on 45 days, new due date = 15.02.).
      operationId: order_update
      parameters:
        -
          name: id
          in: path
          description: 'Order external code or UUID'
          required: true
          schema:
            oneOf:
              -
                $ref: '#/components/schemas/UUID'
              -
                type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LegacyUpdateOrderRequest'
      responses:
        '204':
          description: 'Order successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order/{uuid}/payments':
    get:
      tags:
        - 'Order Management'
      summary: 'Get Order Payments'
      operationId: get_order_payments
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrderPaymentsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      deprecated: true
      security:
        -
          oauth2: []
  /orders:
    get:
      tags:
        - 'Dashboard Orders'
      summary: 'Get Orders'
      operationId: orders_get
      parameters:
        -
          name: sort_by
          in: query
          required: false
          schema:
            type: string
            default: 'created_at,desc'
            enum:
              - created_at
              - 'created_at,desc'
              - 'created_at,asc'
              - external_code
              - 'external_code,desc'
              - 'external_code,asc'
              - amount_gross
              - 'amount_gross,desc'
              - 'amount_gross,asc'
              - state
              - 'state,desc'
              - 'state,asc'
        -
          name: offset
          in: query
          required: false
          schema:
            type: integer
            minimum: 0
        -
          name: limit
          in: query
          required: false
          schema:
            type: integer
            maximum: 100
            minimum: 1
        -
          name: search
          in: query
          description: 'Search text. Filters search results by: `external_code`, `uuid` or `invoice_number`.'
          required: false
          schema:
            $ref: '#/components/schemas/TinyText'
        -
          name: filters
          in: query
          required: false
          style: deepObject
          explode: true
          schema:
            properties:
              merchant_debtor_id:
                $ref: '#/components/schemas/UUID'
              state:
                type: array
                items:
                  $ref: '#/components/schemas/OrderState'
                minItems: 1
            type: object
      responses:
        '200':
          description: 'Orders list'
          content:
            application/json:
              schema:
                properties:
                  total: { type: integer, minimum: 0 }
                  items: { type: array, items: { $ref: '#/components/schemas/OrderResponse' } }
                type: object
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
    post:
      tags:
        - 'Order Management'
      summary: 'Create Order'
      operationId: order_create_V2
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequestV2'
      responses:
        '200':
          description: 'Order successfully created'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponseV2'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/signatory-powers/{token}':
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Get Signatory Power Details'
      operationId: get_signatory_power_details
      parameters:
        -
          name: token
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSignatoryPowerDetailsResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
  /merchant/signatory-powers:
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Get signatory powers'
      operationId: signatory_powers_get
      responses:
        '200':
          description: 'Signatory Powers List'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSignatoryPowersResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/finish-integration:
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Finish Technical Integration'
      operationId: merchant_finish_integration
      responses:
        '204':
          description: 'Step successfully updated.'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/start-integration:
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Start Merchant Integration'
      operationId: merchant_start_integration
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantStartIntegrationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user/login:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Merchant User Login'
      operationId: merchant_user_login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantUserLoginRequest'
      responses:
        '200':
          description: 'Login successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantUserLoginResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security: []
  /merchant/user/logout:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Merchant User Logout'
      operationId: merchant_user_logout
      responses:
        '200':
          description: 'Logout successful'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order/{id}/pause-dunning':
    post:
      tags:
        - 'Order Management'
      summary: 'Pause Order Dunning Process'
      operationId: order_pause_dunning
      parameters:
        -
          name: id
          in: path
          description: 'Order external code or UUID'
          required: true
          schema:
            oneOf:
              -
                $ref: '#/components/schemas/UUID'
              -
                type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PauseOrderDunningRequest'
      responses:
        '204':
          description: 'Successfully paused order dunning'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          description: 'Pause order dunning is not allowed'
          content:
            application/json:
              schema:
                properties:
                  errors: { type: array, items: { required: [title, code], properties: { title: { type: string, enum: ['maximum pausing attempts reached', 'requested number of days exceeds maximum duration allowed', 'maximum dunning stage reached', 'other orders exceed maximum dunning stage', 'Cannot pause dunning. Order is not in state late'], example: 'maximum pausing attempts reached', nullable: false }, code: { type: string, example: forbidden, nullable: true } }, type: object } }
                type: object
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/users/invitations/{token}/signup':
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Register Invited User'
      operationId: register_invited_user
      parameters:
        -
          name: token
          in: path
          description: 'Invitation Token'
          required: true
          schema:
            type: string
            maxLength: 36
            example: 689e71e69zk8484k0k0cckkgs08cogk4w0ko
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterInvitedMerchantUserRequest'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantUserLoginResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  '/debtor/{uuid}/information-change-request':
    post:
      tags:
        - 'Dashboard Debtors'
      summary: 'Request Debtor Information Change'
      operationId: debtor_information_change_request
      parameters:
        -
          name: uuid
          in: path
          description: 'Merchant debtor UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '201':
          description: 'Debtor information change request created'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user/request-new-password:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Request New Password'
      operationId: request_new_password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestNewPasswordRequest'
      responses:
        '200':
          description: 'New password successfully requested'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/users/invitations/{uuid}/resend':
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Resend User Invitation'
      operationId: resend_user_invitation
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateMerchantUserInvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/ResourceConflict'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user/reset-password:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Reset Password'
      operationId: reset_password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '204':
          description: 'Password successfully reset'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/users/invitations/{uuid}':
    delete:
      tags:
        - 'Dashboard Users'
      summary: 'Revoke User Invitation'
      operationId: revoke_user_invitation
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      responses:
        '204':
          description: 'Successful response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/bank-account:
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Setup Bank Account'
      operationId: setup_merchant_bank_account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetupMerchantBankAccountRequest'
      responses:
        '204':
          description: 'Successful response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order/{id}/ship':
    post:
      tags:
        - 'Order Management'
      summary: 'Ship Order'
      description: |-
        Confirm that an order was shipped.

        Confirm the shipment of the product or delivery of the agreed service to receive the payout of the purchase amount.
      operationId: order_ship
      parameters:
        -
          name: id
          in: path
          description: 'Order external code or UUID'
          required: true
          schema:
            oneOf:
              -
                $ref: '#/components/schemas/UUID'
              -
                type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShipOrderRequestV1'
      responses:
        '200':
          description: 'Order successfully shipped. Order details.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order/{uuid}/ship-with-invoice':
    post:
      tags:
        - 'Order Management'
      summary: 'Ship Order With Invoice'
      operationId: order_ship_with_invoice
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ShipOrderWithInvoiceRequest'
      responses:
        '200':
          description: 'Order successfully shipped. Order details.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/signatory-powers-selection:
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Signatory powers selection'
      operationId: signatory_powers_selection
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignatoryPowersSelectionRequest'
      responses:
        '204':
          description: 'Signatory powers saved successfully.'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/signatory-powers/{token}/start-identity-verification':
    post:
      tags:
        - 'Dashboard Merchants'
      summary: 'Start Identity Verification By Signatory Power'
      operationId: start_external_identity_verification
      parameters:
        -
          name: token
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartIdentityVerificationRedirects'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartIdentityVerificationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/ServerError'
  /merchant/user/start-identity-verification:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Start Identity Verification (KYC)'
      operationId: start_identity_verification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartIdentityVerificationRedirects'
      responses:
        '200':
          description: 'Successful response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartIdentityVerificationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/users/invitations/role:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Update Invitation Role'
      operationId: role_invitation_update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInvitationRoleRequest'
      responses:
        '204':
          description: 'Role successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/order-with-invoice/{uuid}':
    post:
      tags:
        - 'Order Management'
      summary: 'Update Order With Invoice'
      operationId: order_update_with_invoice
      parameters:
        -
          name: uuid
          in: path
          description: 'Order UUID'
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UpdateOrderWithInvoiceRequest'
      responses:
        '204':
          description: 'Order successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /merchant/user/role:
    post:
      tags:
        - 'Dashboard Users'
      summary: 'Update User Role'
      operationId: role_user_update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRoleRequest'
      responses:
        '204':
          description: 'Role successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/merchant/verify-new-external-code/{externalCode}':
    get:
      tags:
        - 'Dashboard Merchants'
      summary: 'Verify new External Code for Merchant'
      operationId: verify_new_external_code
      parameters:
        -
          name: externalCode
          in: path
          description: 'Merchant debtor external code'
          required: true
          schema:
            $ref: '#/components/schemas/TinyText'
      responses:
        '204':
          description: 'Valid new external code'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          $ref: '#/components/responses/ResourceConflict'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/checkout-sessions/{sessionUuid}/confirm':
    put:
      tags:
        - 'Checkout Server'
      summary: 'Checkout Session Confirm'
      description: 'Confirms the creation of an existing checkout session.'
      operationId: checkout_session_confirm
      parameters:
        -
          name: sessionUuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckoutConfirmOrderRequest'
      responses:
        '202':
          description: 'Order data successfully confirmed'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponseV2'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/invoices/{uuid}/confirm-payment':
    post:
      tags:
        - Invoices
      summary: 'Confirm Invoice Payment'
      description: 'Confirms that the debtor paid the given amount of this invoice directly to the merchant.'
      operationId: invoice_payment_confirm
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                paid_amount:
                  type: number
                  format: float
                  minimum: 0.1
              type: object
      responses:
        '204':
          description: 'Invoice payment successfully confirmed'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/invoices/{uuid}/credit-notes':
    post:
      tags:
        - Invoices
      summary: 'Create Credit Note'
      operationId: creditnote_create
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCreditNoteRequest'
      responses:
        '201':
          description: 'CreditNote successfully created'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  /invoices:
    post:
      tags:
        - Invoices
      summary: 'Create Invoice'
      description: |-
        >By creating an invoice, you will ship that order based on the amount the invoice has.

        `Ex:` If you have an order of `500 Euro gross` and you want to partially ship it, just create an Invoice with the amount of `250 Euro gross`, and the order will move to `partially_shipped` state.

        > To move the same order in state shipped you need to create another invoice for that same order with another 250 Euro gross.
      operationId: invoice_create
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInvoiceRequest'
      responses:
        '201':
          description: 'Invoice successfully created'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/invoices/{uuid}/extend-duration':
    post:
      tags:
        - Invoices
      summary: 'Extend Invoice duration'
      operationId: extend_invoice_duration
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                duration:
                  $ref: '#/components/schemas/OrderDuration'
              type: object
      responses:
        '204':
          description: 'Invoice extended successfully'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/orders/{id}':
    get:
      tags:
        - 'Order Management'
      summary: 'Get Order Details'
      description: |-
        Retrieves information about an order.

        Get relevant information about an order (e.g. in order to understand, if a specific order was already repaid 
        by your customer).
      operationId: order_get_details
      parameters:
        -
          name: id
          in: path
          description: 'Order external code or UUID'
          required: true
          schema:
            oneOf:
              -
                $ref: '#/components/schemas/UUID'
              -
                type: string
      responses:
        '200':
          description: 'Order details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResponseV2'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/invoices/{uuid}/update-details':
    post:
      tags:
        - Invoices
      summary: 'Update Invoice'
      operationId: invoice_update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInvoiceRequest'
      responses:
        '204':
          description: 'Invoice successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
  '/orders/{uuid}':
    patch:
      tags:
        - 'Order Management'
      summary: 'Update Order'
      description: |-
        Updates an order if changes are necessary. 
        The following information can be updated until the order reached state complete:

        - order amount: decrease the order amount (mostly due to partial cancellations of a purchase), always possible 
          unless the order is already fully paid.
        - duration: extend timeframe for a payment. This changes the due date (Â§1).
        - invoice details like invoice number and document URL.


        Â§1 This call can also be used to move the due date into the future. This is possible from the moment the shipment is 
        confirmed until the last day before reaching the current due date.

        The new duration is to be set (i.e. initial request for 30 days, shipment on the 01.01., due date = 31.01., 
        update duration on 45 days, new due date = 15.02.).
      operationId: order_update
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/UUID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOrderRequest'
      responses:
        '204':
          description: 'Order successfully updated'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'
      security:
        -
          oauth2: []
components:
  schemas:
    UUID:
      type: string
      format: uuid
      maxLength: 36
      minLength: 36
      example: 12345667-890a-bcde-f123-34567890abcd
    OrderState:
      title: 'Order State'
      type: string
      enum:
        - new
        - pre_waiting
        - authorized
        - waiting
        - created
        - declined
        - shipped
        - paid_out
        - late
        - complete
        - canceled
      example: created
    OnboardingState:
      title: 'Onboarding State'
      type: string
      enum:
        - new
        - complete
        - canceled
      example: new
    OnboardingStateTransition:
      title: 'Onboarding State'
      type: string
      enum:
        - complete
        - cancel
      example: complete
    OnboardingStepState:
      title: 'Onboarding Step State'
      type: string
      enum:
        - new
        - confirmation_pending
        - complete
      example: new
    OnboardingStepName:
      title: 'Onboarding Step Name'
      type: string
      enum:
        - financial_assessment
        - signatory_confirmation
        - identity_verification
        - technical_integration
        - sepa_mandate_confirmation
      example: financial_assessment
    OnboardingStepTransition:
      title: 'Merchant User Onboarding steps transitions'
      type: string
      enum:
        - request_confirmation
        - complete
        - cancel
      example: complete
    OrderDeclineReason:
      title: 'Order Decline Reason'
      type: string
      enum:
        - risk_policy
        - risk_scoring_failed
        - debtor_not_identified
        - debtor_address
        - risk_scoring_failed
        - debtor_limit_exceeded
      example: debtor_not_identified
    OrderDunningStatus:
      title: 'Order Dunning Status'
      type: string
      enum:
        - not_started
        - active
        - paused
        - inactive
      example: active
      nullable: true
    OrderDuration:
      title: 'Order Duration'
      type: integer
      maximum: 120
      minimum: 1
      example: 30
    PostalCode:
      title: 'Postal Code'
      type: string
      maxLength: 5
      example: '10969'
    CountryCode:
      title: 'Country Code'
      type: string
      maxLength: 2
      pattern: '^[A-Za-z]{2}$'
      example: DE
    PhoneNumber:
      title: 'Phone Number'
      type: string
      maxLength: 21
      minLength: 5
      pattern: '^(\+|\d|\()[ \-\/0-9()]{5,20}$'
      example: '030 31199251'
    IBAN:
      title: IBAN
      type: string
      maxLength: 22
      minLength: 22
      pattern: '^[A-Z]{2}(?:[ ]?[0-9]){18,20}$'
      example: DE61500105175136458915
    Date:
      title: Date
      type: string
      format: date
      example: '2019-01-20'
    DateTime:
      title: Date-Time
      type: string
      format: date-time
      example: '2019-01-20 14:00:00'
    TinyText:
      title: string
      type: string
      maxLength: 255
    URL:
      title: URL
      type: string
      format: url
      maxLength: 255
      example: 'https://example.com'
    Money:
      title: Money
      type: number
      format: float
      pattern: '^(\d{1,}(.\d{2})?)$'
      example: 99.95
    MerchantUserPermissions:
      title: 'Merchant User Permissions'
      type: string
      enum:
        - VIEW_ORDERS
        - VIEW_DEBTORS
        - VIEW_PAYMENTS
        - VIEW_USERS
        - VIEW_ONBOARDING
        - VIEW_CREDENTIALS
        - ACCESS_TEST_DATA
        - CONFIRM_ORDER_PAYMENT
        - PAUSE_DUNNING
        - MANAGE_USERS
        - CANCEL_ORDERS
        - MANAGE_ONBOARDING
        - CHANGE_DEBTOR_INFORMATION
        - UPDATE_ORDERS
        - SHIP_ORDERS
        - CREATE_ORDERS
      example:
        - VIEW_ORDERS
        - VIEW_DEBTORS
        - VIEW_PAYMENTS
        - VIEW_USERS
        - VIEW_ONBOARDING
        - VIEW_CREDENTIALS
        - ACCESS_TEST_DATA
        - CONFIRM_ORDER_PAYMENT
        - PAUSE_DUNNING
        - MANAGE_USERS
        - CANCEL_ORDERS
        - MANAGE_ONBOARDING
        - CHANGE_DEBTOR_INFORMATION
        - UPDATE_ORDERS
        - SHIP_ORDERS
        - CREATE_ORDERS
    DebtorInformationChangeRequestState:
      title: 'Debtor Information ChangeRequest State'
      type: string
      enum:
        - new
        - confirmation_pending
        - complete
        - declined
        - canceled
      example: new
    AmountDTO:
      title: 'Amount with split values for net, gross and tax.'
      required:
        - net
        - gross
        - tax
      properties:
        gross:
          description: 'Value greater than 0, with max. 2 decimals. It should equal to net + tax.'
          type: number
          format: float
          minimum: 1
          example: 260.27
        net:
          description: 'Value greater than 0, with max. 2 decimals.'
          type: number
          format: float
          minimum: 1
          example: 200.12
        tax:
          description: 'Value greater than or equal to 0, with max. 2 decimals.'
          type: number
          format: float
          minimum: 0
          example: 60.15
      type: object
    Address:
      title: 'Address data are all required except house number.'
      required:
        - street
        - postal_code
        - city
        - country
      properties:
        house_number:
          $ref: '#/components/schemas/TinyText'
        street:
          $ref: '#/components/schemas/TinyText'
        postal_code:
          $ref: '#/components/schemas/TinyText'
        city:
          $ref: '#/components/schemas/TinyText'
        country:
          $ref: '#/components/schemas/TinyText'
      type: object
    OauthClientCredentialsGrantRequestBodyParams:
      title: 'Request OAuth Token'
      required:
        - grant_type
        - client_id
        - client_secret
      properties:
        grant_type:
          type: string
          example: client_credentials
        client_id:
          $ref: '#/components/schemas/UUID'
        client_secret:
          type: string
      type: object
    OauthTokenResponseBody:
      title: 'Request Oauth Token Response'
      properties:
        token_type:
          type: string
          example: Bearer
          nullable: false
        expires_in:
          description: 'TTL of the access token in seconds (Default is 8 hours)'
          type: integer
          nullable: false
        access_token:
          description: 'JWT signed with the authorization server''s private key'
          type: string
          nullable: false
      type: object
    AbstractShipOrderRequest:
      allOf:
        -
          $ref: '#/components/schemas/AbstractShipOrderRequestV1'
        -
          title: 'Order Shipping plain Object'
          properties:
            external_order_id:
              description: 'External Order ID. It should only be provided if it was not provided in the create order call.'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            invoice_number:
              $ref: '#/components/schemas/TinyText'
          type: object
    AbstractShipOrderRequestV1:
      title: 'Order Shipping plain Object'
      properties:
        external_order_id:
          description: 'External Order ID. It should only be provided if it was not provided in the create order call.'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        invoice_number:
          $ref: '#/components/schemas/TinyText'
      type: object
    AuthorizeSandboxDTO:
      properties:
        user_entity:
          $ref: '#/components/schemas/MerchantUserEntity'
        email:
          $ref: '#/components/schemas/TinyText'
        sandbox_merchant_payment_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    CheckoutConfirmOrderRequest:
      required:
        - amount
        - duration
        - debtor_company
      properties:
        amount:
          $ref: '#/components/schemas/AmountDTO'
        duration:
          $ref: '#/components/schemas/OrderDuration'
        debtor_company_name:
          description: 'Company name'
          $ref: '#/components/schemas/TinyText'
        debtor_company_address:
          $ref: '#/components/schemas/Address'
        delivery_address:
          nullable: true
          $ref: '#/components/schemas/Address'
        external_code:
          description: 'Order external code'
          example: DE123456-1
          $ref: '#/components/schemas/TinyText'
      type: object
    CheckoutUpdateOrderRequest:
      required:
        - billing_address
      properties:
        billing_address:
          $ref: '#/components/schemas/CreateOrderAddressRequest'
        duration:
          $ref: '#/components/schemas/OrderDuration'
      type: object
    CreateCreditNoteRequest:
      title: 'Create credit note request.'
      properties:
        external_code:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        amount:
          $ref: '#/components/schemas/AmountDTO'
        comment:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        line_items:
          type: array
          items:
            $ref: '#/components/schemas/LineItemsRequest'
          nullable: true
      type: object
    CreateInvoiceRequest:
      title: 'Order Creation Request'
      required:
        - amount
        - duration
        - debtor_company
        - debtor_person
      properties:
        orders:
          type: array
          items:
            $ref: '#/components/schemas/TinyText'
          nullable: true
        external_code:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        invoice_url:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        shipping_document_url:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        amount:
          $ref: '#/components/schemas/AmountDTO'
        line_items:
          type: array
          items:
            $ref: '#/components/schemas/LineItemsRequest'
          nullable: true
      type: object
    CreateMerchantRequest:
      title: 'Merchant Data'
      required:
        - company_id
        - merchant_financing_limit
        - initial_debtor_financing_limit
      properties:
        company_id:
          description: 'Company ID from webapp.companies'
          type: string
          format: numeric
        merchant_financing_limit:
          type: number
          format: float
        initial_debtor_financing_limit:
          type: number
          format: float
        webhook_url:
          type: string
          format: uri
          nullable: true
        webhook_authorization:
          description: 'Authorization header that will be sent with the merchant webhooks. Currently `X-Api-Key: XXX` and `Authorization: Basic XXX` are supported.'
          type: string
          example: 'X-Api-Key: test'
          nullable: true
      type: object
    CreateMerchantResponse:
      properties:
        oauth_client_id:
          $ref: '#/components/schemas/UUID'
        oauth_client_secret:
          $ref: '#/components/schemas/UUID'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/MerchantEntity'
    CreateMerchantUserInvitationRequest:
      required:
        - email
        - role_uuid
      properties:
        email:
          type: string
          format: email
        role_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    CreateMerchantUserInvitationResponse:
      required:
        - invitation_uuid
      properties:
        invitation_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    CreateMerchantWithCompanyRequest:
      required:
        - name
        - legal_form
        - address_street
        - address_city
        - address_postal_code
        - address_country
        - crefo_id
        - schufa_id
      properties:
        name:
          $ref: '#/components/schemas/TinyText'
        legal_form:
          $ref: '#/components/schemas/TinyText'
        address_street:
          example: 'Charlotten Str.'
          $ref: '#/components/schemas/TinyText'
        address_house:
          example: '4'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_city:
          example: Berlin
          $ref: '#/components/schemas/TinyText'
        address_postal_code:
          $ref: '#/components/schemas/PostalCode'
        address_country:
          $ref: '#/components/schemas/CountryCode'
        crefo_id:
          $ref: '#/components/schemas/TinyText'
        schufa_id:
          $ref: '#/components/schemas/TinyText'
        tax_id:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        registration_number:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        merchant_financing_limit:
          type: number
          format: float
          nullable: true
        initial_debtor_financing_limit:
          type: number
          format: float
          nullable: true
        webhook_url:
          type: string
          format: uri
          nullable: true
        webhook_authorization:
          description: |-
            Authorization header that will be sent with the merchant webhooks.
             *                             Currently only `X-Api-Key: XXX` and `Authorization: Basic XXX` formats are supported.
          type: string
          example: 'X-Api-Key: test'
          nullable: true
        iban:
          example: DE87500105173872482875
          $ref: '#/components/schemas/TinyText'
        bic:
          example: AABSDE31
          $ref: '#/components/schemas/TinyText'
        is_onboarding_complete:
          type: boolean
        fee_rates:
          type: string
      type: object
    CreateOrderRequest:
      title: 'Order Creation Request'
      required:
        - amount
        - duration
        - debtor_company
        - debtor_person
      properties:
        amount:
          $ref: '#/components/schemas/AmountDTO'
        comment:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        duration:
          $ref: '#/components/schemas/OrderDuration'
        order_id:
          description: 'Order external code'
          example: DE123456-1
          $ref: '#/components/schemas/TinyText'
        delivery_address:
          nullable: true
          $ref: '#/components/schemas/CreateOrderAddressRequest'
        billing_address:
          nullable: true
          $ref: '#/components/schemas/CreateOrderAddressRequest'
        debtor_company:
          $ref: '#/components/schemas/CreateOrderDebtorCompanyRequest'
        debtor_person:
          $ref: '#/components/schemas/CreateOrderDebtorPersonRequest'
        line_items:
          type: array
          items:
            $ref: '#/components/schemas/CreateOrderLineItemRequest'
          nullable: true
      type: object
    CreateOrderRequestV2:
      title: 'Order Creation Request'
      required:
        - amount
        - duration
        - debtor_company
        - debtor_person
      properties:
        amount:
          $ref: '#/components/schemas/AmountDTO'
        comment:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        duration:
          $ref: '#/components/schemas/OrderDuration'
        external_code:
          description: 'Order external code'
          example: DE123456-1
          $ref: '#/components/schemas/TinyText'
        delivery_address:
          nullable: true
          $ref: '#/components/schemas/Address'
        billing_address:
          nullable: true
          $ref: '#/components/schemas/Address'
        debtor_company:
          $ref: '#/components/schemas/CreateOrderDebtorCompanyRequestV2'
        debtor_person:
          $ref: '#/components/schemas/CreateOrderDebtorPersonRequest'
        line_items:
          type: array
          items:
            $ref: '#/components/schemas/CreateOrderLineItemRequest'
          nullable: true
      type: object
    CreateOrderAddressRequest:
      title: Address
      required:
        - street
        - city
        - postal_code
        - country
      properties:
        addition:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        house_number:
          example: '4'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        street:
          example: 'Charlotten Str.'
          $ref: '#/components/schemas/TinyText'
        city:
          example: Berlin
          $ref: '#/components/schemas/TinyText'
        postal_code:
          $ref: '#/components/schemas/PostalCode'
        country:
          $ref: '#/components/schemas/CountryCode'
      type: object
    CreateOrderDebtorCompanyRequest:
      title: 'Debtor Company'
      required:
        - merchant_customer_id
        - name
        - legal_form
        - address_street
        - address_city
        - address_postal_code
        - address_country
      properties:
        merchant_customer_id:
          description: 'Unique identifier of the customer provided by the merchant side.'
          example: '128483'
          $ref: '#/components/schemas/TinyText'
        name:
          example: 'Billie GmbH'
          $ref: '#/components/schemas/TinyText'
        tax_id:
          example: DE1234556
          nullable: true
          $ref: '#/components/schemas/TinyText'
        tax_number:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        registration_court:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        registration_number:
          example: 'HRB 1234556'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        industry_sector:
          example: C
          nullable: true
          $ref: '#/components/schemas/TinyText'
        subindustry_sector:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        employees_number:
          example: 1-5
          nullable: true
          $ref: '#/components/schemas/TinyText'
        legal_form:
          description: 'One of the legal form codes available in the `GET /legal-forms` API endpoint.'
          example: '10001'
          $ref: '#/components/schemas/TinyText'
        established_customer:
          type: boolean
          nullable: true
        address_addition:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_house_number:
          example: '4'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_street:
          example: Charlottenstr.
          $ref: '#/components/schemas/TinyText'
        address_city:
          example: Berlin
          $ref: '#/components/schemas/TinyText'
        address_postal_code:
          example: '10969'
          $ref: '#/components/schemas/PostalCode'
        address_country:
          example: DE
          $ref: '#/components/schemas/CountryCode'
      type: object
    CreateOrderDebtorCompanyRequestV2:
      title: 'Debtor Company'
      required:
        - merchant_customer_id
        - name
        - legal_form
        - address_street
        - address_city
        - address_postal_code
        - address_country
      properties:
        merchant_customer_id:
          description: 'Unique identifier of the customer provided by the merchant side.'
          example: '128483'
          $ref: '#/components/schemas/TinyText'
        name:
          example: 'Billie GmbH'
          $ref: '#/components/schemas/TinyText'
        address:
          $ref: '#/components/schemas/Address'
        tax_id:
          example: DE1234556
          nullable: true
          $ref: '#/components/schemas/TinyText'
        tax_number:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        registration_court:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        registration_number:
          example: 'HRB 1234556'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        industry_sector:
          example: C
          nullable: true
          $ref: '#/components/schemas/TinyText'
        subindustry_sector:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        employees_number:
          example: 1-5
          nullable: true
          $ref: '#/components/schemas/TinyText'
        legal_form:
          description: 'One of the legal form codes available in the `GET /legal-forms` API endpoint.'
          example: '10001'
          $ref: '#/components/schemas/TinyText'
        established_customer:
          type: boolean
          nullable: true
      type: object
    CreateOrderDebtorPersonRequest:
      title: 'Debtor Person'
      required:
        - email
      properties:
        salutation:
          type: string
          maxLength: 1
          enum:
            - m
            - f
          nullable: true
        first_name:
          example: James
          $ref: '#/components/schemas/TinyText'
        last_name:
          example: Smith
          $ref: '#/components/schemas/TinyText'
        phone_number:
          $ref: '#/components/schemas/PhoneNumber'
        email:
          type: string
          format: email
          example: james.smith@example.com
      type: object
    CreateOrderLineItemRequest:
      title: 'Order Line Item'
      required:
        - external_id
        - title
        - quantity
        - amount_gross
        - amount_tax
        - amount_net
      properties:
        external_id:
          $ref: '#/components/schemas/TinyText'
        title:
          $ref: '#/components/schemas/TinyText'
        description:
          type: string
          nullable: true
        quantity:
          type: number
          minimum: 1
        category:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        brand:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        gtin:
          description: 'Global Trade Item Number'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        mpn:
          description: 'Manufacturer Part Numbers'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        amount:
          $ref: '#/components/schemas/AmountDTO'
      type: object
    DeactivateUserRequest:
      title: 'User Deactivate Object'
      required:
        - user_uuid
      properties:
        user_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    GetDebtorCompanyLimitsMerchant:
      title: 'Debtor''s Merchant IDs Object'
      properties:
        id:
          type: integer
        payment_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    GetDebtorCompanyLimitsResponse:
      title: 'Debtor Company Limits Object'
      properties:
        company_id:
          type: integer
        company_uuid:
          $ref: '#/components/schemas/UUID'
        company_financing_power:
          description: 'Current available limit for this company in Platform.'
          example: 10000
          allOf:
            -
              $ref: '#/components/schemas/Money'
        merchant_debtors:
          description: 'List of debtors created in Paella for this company.'
          type: array
          items:
            properties:
              id:
                description: 'Merchant Debtor ID'
                type: integer
              uuid:
                description: 'Merchant Debtor UUID'
                $ref: '#/components/schemas/UUID'
              financing_limit:
                description: 'Full limit assigned in Paella to this debtor and merchant combination.'
                example: 2500
                nullable: true
                allOf:
                  - { $ref: '#/components/schemas/Money' }
              financing_power:
                description: 'Current available limit in Paella for this debtor and merchant combination.'
                example: 2251.01
                nullable: true
                allOf:
                  - { $ref: '#/components/schemas/Money' }
              merchant:
                description: 'The merchant the merchant-debtor belongs to.'
                $ref: '#/components/schemas/GetDebtorCompanyLimitsMerchant'
            type: object
      type: object
    GetExternalDebtorsResponse:
      properties:
        name:
          $ref: '#/components/schemas/TinyText'
        legal_form:
          $ref: '#/components/schemas/TinyText'
        address_street:
          $ref: '#/components/schemas/TinyText'
        address_city:
          $ref: '#/components/schemas/TinyText'
        address_postal_code:
          $ref: '#/components/schemas/TinyText'
        address_country:
          $ref: '#/components/schemas/TinyText'
        address_house_number:
          $ref: '#/components/schemas/TinyText'
      type: object
    GetInvitedMerchantUserResponse:
      properties:
        email:
          type: string
          format: email
          nullable: false
        should_accept_tc:
          type: boolean
          nullable: false
      type: object
    GetInvoiceResponse:
      title: 'Get Invoice Response'
      properties:
        uuid:
          $ref: '#/components/schemas/UUID'
        invoice_number:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        duration:
          type: number
          nullable: false
        payout_amount:
          type: number
          format: float
          nullable: false
        amount:
          type: number
          format: float
          nullable: false
        amount_net:
          type: number
          format: float
          nullable: false
        amount_tax:
          type: number
          format: float
          nullable: false
        outstanding_amount:
          type: number
          format: float
          nullable: false
        fee_amount:
          type: number
          format: float
          nullable: false
        fee_rate:
          type: number
          format: float
          nullable: false
        created_at:
          type: string
          format: date
          example: '2019-03-20'
          nullable: false
        due_date:
          type: string
          format: date
          example: '2019-03-20'
          nullable: false
        pending_merchant_payment_amount:
          type: number
          format: float
          nullable: false
        pending_cancellation_amount:
          type: number
          format: float
          nullable: false
        state:
          type: string
          example: created
          nullable: true
        orders:
          type: array
          items:
            properties:
              uuid:
                $ref: '#/components/schemas/UUID'
              external_code:
                type: string
                example: C-10123456789-0001
                nullable: true
              amount:
                type: number
                format: float
                nullable: false
              amount_net:
                type: number
                format: float
                nullable: false
              amount_tax:
                type: number
                format: float
                nullable: false
            type: object
      type: object
    GetInvoicePaymentsResponse:
      title: 'Invoice Payments Response'
      properties:
        summary:
          description: 'Invoice Payments Summary'
          $ref: '#/components/schemas/InvoicePaymentSummaryDTO'
        items:
          description: 'Bank Transaction object'
          type: array
          items:
            $ref: '#/components/schemas/BankTransactionDTO'
        total:
          description: 'Total number of items'
          type: integer
      type: object
    InvoicePaymentSummaryDTO:
      title: 'Invoice Payments Summary object'
      properties:
        merchant_paid_amount:
          type: number
          format: float
        debtor_paid_amount:
          type: number
          format: float
        merchant_unmapped_amount:
          type: number
          format: float
        debtor_unmapped_amount:
          type: number
          format: float
        total_paid_amount:
          type: number
          format: float
        cancelled_amount:
          type: number
          format: float
        open_amount:
          type: number
          format: float
      type: object
    GetMerchantCredentialsResponse:
      properties:
        production_credentials:
          properties:
            client_id:
              type: string
              example: 6d6b4222-be8c-11e9-9cb5-2a2ae2dbcce4
            client_secret:
              type: string
              example: sGTOI43UNLSKlkfdji4jfscn2812
          type: object
          nullable: true
        sandbox_credentials:
          properties:
            client_id:
              type: string
              example: 6d6b4222-be8c-11e9-9cb5-2a2ae2dbcce4
            client_secret:
              type: string
              example: sGTOI43UNLSKlkfdji4jfscn2812
          type: object
          nullable: true
      type: object
    GetMerchantFinancialAssessmentResponse:
      title: 'Financial Assessment Response'
      properties:
        yearly_transaction_volume:
          type: number
          format: float
          example: 22.33
        mean_invoice_amount:
          type: number
          format: float
          example: 233.44
        cancellation_rate:
          type: number
          format: float
          example: 23.3
        invoice_duration:
          type: integer
          example: 100
        returning_order_rate:
          type: number
          format: float
          example: 90
          nullable: true
        default_rate:
          type: number
          format: float
          example: 50
          nullable: true
        high_invoice_amount:
          type: number
          format: float
          example: 50.55
          nullable: true
        digital_goods_rate:
          type: number
          format: float
          example: 50
          nullable: true
      type: object
    GetMerchantNotificationsResponse:
      title: 'Merchant Notifications Count'
      properties:
        debtor_information_change_requests:
          type: integer
          nullable: false
      type: object
    GetMerchantOnboardingResponse:
      title: GetMerchantOnboardingResponse
      properties:
        onboarding_state:
          $ref: '#/components/schemas/OnboardingState'
        onboarding_steps:
          type: array
          items:
            properties:
              uuid:
                $ref: '#/components/schemas/UUID'
              name:
                $ref: '#/components/schemas/OnboardingStepName'
              state:
                $ref: '#/components/schemas/OnboardingStepState'
            type: object
      type: object
    GetMerchantRolesResponse:
      title: GetMerchantRolesResponse
      type: array
      items:
        properties:
          uuid:
            $ref: '#/components/schemas/UUID'
          name:
            $ref: '#/components/schemas/TinyText'
        type: object
    GetMerchantUsersResponse:
      title: 'Merchant Users List'
      properties:
        total:
          type: integer
          nullable: false
        items:
          type: array
          items:
            properties:
              uuid: {  }
              first_name:
                type: string
                nullable: true
              last_name:
                type: string
                nullable: true
              email:
                type: string
                format: email
                nullable: false
              role:
                properties:
                  uuid: { $ref: '#/components/schemas/UUID' }
                  name: { description: 'Role internal name', example: Support, $ref: '#/components/schemas/TinyText' }
                type: object
                nullable: false
              invitation_uuid:
                nullable: true
                $ref: '#/components/schemas/UUID'
              invitation_status:
                type: string
                enum:
                  - pending
                  - expired
                  - complete
                nullable: false
            type: object
          nullable: false
      type: object
    GetSignatoryPowerDetailsResponse:
      properties:
        merchant_name:
          type: string
          example: 'Example GmbH'
        identity_verification_url:
          type: string
          format: url
      type: object
    GetSignatoryPowersResponse:
      title: 'Signatory Powers Response'
      properties:
        uuid:
          $ref: '#/components/schemas/UUID'
        first_name:
          example: 'Person Name'
          $ref: '#/components/schemas/TinyText'
        last_name:
          example: 'Last name'
          $ref: '#/components/schemas/TinyText'
        additional_signatories_required:
          type: integer
          example: 2
        address_house:
          example: '4'
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_street:
          example: Charlottenstr.
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_city:
          example: Berlin
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_postal_code:
          type: string
          maxLength: 5
          example: '10969'
          nullable: true
        address_country:
          type: string
          maxLength: 2
          example: DE
          nullable: true
        automatically_identified_as_user:
          type: boolean
          maxLength: 2
          example: 'false'
          nullable: true
      type: object
    LegacyUpdateOrderRequest:
      title: 'Order Update Object'
      properties:
        duration:
          $ref: '#/components/schemas/OrderDuration'
        amount:
          $ref: '#/components/schemas/AmountDTO'
        invoice_number:
          $ref: '#/components/schemas/TinyText'
        invoice_url:
          $ref: '#/components/schemas/TinyText'
        order_id:
          description: 'Order external code'
          example: DE123456-1
          $ref: '#/components/schemas/TinyText'
      type: object
    LineItemsRequest:
      title: 'Order Line Item'
      required:
        - external_id
        - quantity
      properties:
        external_id:
          $ref: '#/components/schemas/TinyText'
        quantity:
          type: number
          minimum: 1
      type: object
    MarkDuplicateDebtorItem:
      required:
        - debtor_id
        - is_duplicate_of
      properties:
        debtor_id:
          type: integer
        is_duplicate_of:
          type: integer
      type: object
    MerchantOnboardingStepTransitionRequest:
      properties:
        step:
          $ref: '#/components/schemas/OnboardingStepName'
        transition:
          $ref: '#/components/schemas/OnboardingStepTransition'
      type: object
    MerchantOnboardingTransitionRequest:
      properties:
        transition:
          $ref: '#/components/schemas/OnboardingStateTransition'
      type: object
    MerchantStartIntegrationResponse:
      title: MerchantStartIntegrationResponse
      properties:
        production:
          properties:
            client_id:
              type: string
            client_secret:
              type: string
          type: object
          nullable: true
        sandbox:
          properties:
            client_id:
              type: string
            client_secret:
              type: string
          type: object
          nullable: false
      type: object
    MerchantUserLoginRequest:
      title: 'Merchant User Login'
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          nullable: false
        password:
          type: string
          format: password
          nullable: false
      type: object
    MerchantUserLoginResponse:
      title: 'Merchant User Login Response'
      properties:
        access_token:
          description: 'Bearer JWT Token'
          type: string
          example: l387435hzyoc0oo4kokow
          nullable: false
        user:
          nullable: false
          $ref: '#/components/schemas/MerchantUserDTO'
      type: object
    OrderDebtorIdentificationV2Response:
      title: 'Identified Debtor Response'
      properties:
        identified_debtor:
          description: 'Identified company'
          properties:
            name:
              example: 'Billie GmbH'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_house_number:
              example: '4'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_street:
              example: Charlottenstr.
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_postal_code:
              type: string
              maxLength: 5
              example: '10969'
              nullable: true
            address_city:
              example: Berlin
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_country:
              type: string
              maxLength: 2
              nullable: true
          type: object
      type: object
    PauseOrderDunningRequest:
      title: 'Pause Order Dunning'
      properties:
        number_of_days:
          type: integer
          minimum: 1
          nullable: false
      type: object
    RegisterInvitedMerchantUserRequest:
      required:
        - first_name
        - last_name
        - password
      properties:
        first_name:
          $ref: '#/components/schemas/TinyText'
        last_name:
          $ref: '#/components/schemas/TinyText'
        password:
          minLength: 6
          $ref: '#/components/schemas/TinyText'
        tc_acepted:
          type: boolean
      type: object
    RegisterMerchantRequest:
      properties:
        crefo_id:
          type: string
        email:
          type: string
          format: email
      type: object
    RegisterMerchantResponse:
      properties:
        uuid:
          $ref: '#/components/schemas/UUID'
        name:
          $ref: '#/components/schemas/TinyText'
        invitation_token:
          $ref: '#/components/schemas/TinyText'
      type: object
    RegisterMerchantUserRequest:
      title: 'Register Merchant User'
      required:
        - first_name
        - last_name
        - email
        - password
        - role_uuid
      properties:
        first_name:
          type: string
          nullable: false
        last_name:
          type: string
          nullable: false
        email:
          type: string
          format: email
          nullable: false
        password:
          type: string
          format: password
          nullable: false
        role_uuid:
          type: integer
          nullable: false
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/MerchantUserPermissions'
          default: []
          nullable: true
      type: object
    RequestNewPasswordRequest:
      required:
        - email
      properties:
        email:
          type: string
          format: email
          maxLength: 180
          minLength: 3
      type: object
    ResetPasswordRequest:
      required:
        - password
        - token
      properties:
        password:
          type: string
          format: password
          maxLength: 200
          minLength: 8
        token:
          type: string
      type: object
    SaveMerchantFinancialAssessmentRequest:
      title: 'Request for submitting finnancial assessment'
      required:
        - yearly_transaction_volume
        - mean_invoice_amount
        - cancellation_rate
        - invoice_duration
        - default_rate
        - high_invoice_amount
        - digital_goods_rate
      properties:
        yearly_transaction_volume:
          type: number
          format: float
          example: 22.33
        mean_invoice_amount:
          type: number
          format: float
          example: 233.44
        cancellation_rate:
          type: number
          format: float
          example: 23.3
        invoice_duration:
          type: integer
          example: 100
        returning_order_rate:
          type: number
          format: float
          example: 90
          nullable: true
        default_rate:
          type: number
          format: float
          example: 50
        high_invoice_amount:
          type: number
          format: float
          example: 50.55
        digital_goods_rate:
          type: number
          format: float
          example: 50
      type: object
    SetupMerchantBankAccountRequest:
      required:
        - iban
        - tc_accepted
      properties:
        iban:
          $ref: '#/components/schemas/IBAN'
        tc_accepted:
          type: boolean
      type: object
    ShipOrderRequest:
      title: 'Order Shipping Object'
      required:
        - invoice_url
      properties:
        invoice_url:
          $ref: '#/components/schemas/URL'
        shipping_document_url:
          $ref: '#/components/schemas/URL'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/AbstractShipOrderRequest'
    ShipOrderRequestV1:
      title: 'Order Shipping Object'
      required:
        - invoice_url
      properties:
        invoice_url:
          $ref: '#/components/schemas/URL'
        shipping_document_url:
          $ref: '#/components/schemas/URL'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/AbstractShipOrderRequestV1'
    ShipOrderWithInvoiceRequest:
      title: 'Order Shipping With Invoice Object'
      properties:
        invoice_file:
          description: 'Invoice file'
          type: string
          format: binary
        amount:
          nullable: true
          $ref: '#/components/schemas/AmountDTO'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/AbstractShipOrderRequestV1'
    SignatoryPowersSelectionRequest:
      title: 'Signatory powers selection request'
      properties:
        signatory_powers:
          type: array
          items:
            $ref: '#/components/schemas/SignatoryPowerDTO'
          nullable: false
      type: object
    StartIdentityVerificationRedirects:
      required:
        - redirect_url_coupon_requested
        - redirect_url_review_pending
        - redirect_url_declined
      properties:
        redirect_url_coupon_requested:
          type: string
          format: url
        redirect_url_review_pending:
          type: string
          format: url
        redirect_url_declined:
          type: string
          format: url
      type: object
    StartIdentityVerificationResponse:
      properties:
        url:
          type: string
          format: url
      type: object
    UpdateInvitationRoleRequest:
      title: 'Role Update Object'
      required:
        - email
        - role_uuid
      properties:
        email:
          type: string
          format: email
        role_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    UpdateInvoiceRequest:
      title: 'Invoice Update Request'
      required:
        - external_code
        - invoice_url
      properties:
        external_code:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        invoice_url:
          nullable: true
          $ref: '#/components/schemas/TinyText'
      type: object
    UpdateMerchantDebtorCompanyRequest:
      properties:
        name:
          example: 'Billie GmbH'
          $ref: '#/components/schemas/TinyText'
        address_house:
          example: '4'
          $ref: '#/components/schemas/TinyText'
        address_street:
          example: Charlottenstr.
          $ref: '#/components/schemas/TinyText'
        address_city:
          example: Berlin
          $ref: '#/components/schemas/TinyText'
        address_postal_code:
          example: '10969'
          $ref: '#/components/schemas/TinyText'
      type: object
    UpdateOrderRequest:
      title: 'Order Update with invoice Object'
      properties:
        amount:
          $ref: '#/components/schemas/AmountDTO'
        external_code:
          description: 'Update order request'
          $ref: '#/components/schemas/TinyText'
      type: object
    UpdateOrderWithInvoiceRequest:
      title: 'Order Update with invoice Object'
      properties:
        amount:
          $ref: '#/components/schemas/AmountDTO'
        invoice_number:
          description: 'The invoice number. Required when order state is shipped, paid_out or late'
          $ref: '#/components/schemas/TinyText'
        invoice_file:
          description: 'The invoice file. Required when invoice number has changed.'
          type: string
          format: binary
      type: object
    UpdateUserRoleRequest:
      title: 'Role Update Object'
      required:
        - user_uuid
        - role_uuid
      properties:
        user_uuid:
          $ref: '#/components/schemas/UUID'
        role_uuid:
          $ref: '#/components/schemas/UUID'
      type: object
    MerchantUserIdentityVerificationResponse:
      title: 'Merchant User Identity Verification Response'
      properties:
        url:
          type: string
          example: 'https://postident.deutschepost.de/identportal/?vorgangsnummer=0AAAAAA0AAAA'
        valid_till:
          type: string
          example: '2020-01-01 00:00:00'
        case_status:
          type: string
          example: closed
        identification_status:
          type: string
          example: declined
      type: object
    MerchantEntity:
      properties:
        id:
          type: integer
        created_at:
          $ref: '#/components/schemas/DateTime'
        updated_at:
          $ref: '#/components/schemas/DateTime'
        name:
          $ref: '#/components/schemas/TinyText'
        available_financing_limit:
          type: number
          format: float
        api_key:
          $ref: '#/components/schemas/TinyText'
        company_id:
          $ref: '#/components/schemas/TinyText'
        company_uuid:
          $ref: '#/components/schemas/UUID'
        payment_merchant_id:
          $ref: '#/components/schemas/UUID'
        sepa_b2b_document_uuid:
          $ref: '#/components/schemas/UUID'
        is_active:
          type: boolean
        webhook_url:
          type: string
          format: uri
          nullable: true
        webhook_authorization:
          type: string
          example: 'Authorization: Basic test'
          nullable: true
        credentials:
          properties:
            client_id:
              $ref: '#/components/schemas/UUID'
            secret:
              type: string
              example: 234ty5uykjhfgeqw343ytreg
          type: object
          nullable: true
      type: object
    AbstractMerchantDebtorResponse:
      properties:
        id:
          description: 'Debtor UUID'
          $ref: '#/components/schemas/UUID'
        external_code:
          description: 'Merchant Customer ID'
          $ref: '#/components/schemas/TinyText'
        name:
          $ref: '#/components/schemas/TinyText'
        financing_limit:
          description: 'Full limit assigned to this merchant debtor.'
          type: number
          format: float
        financing_power:
          description: 'Current available limit for this merchant debtor.'
          type: number
          format: float
        bank_account_iban:
          $ref: '#/components/schemas/TinyText'
        bank_account_bic:
          $ref: '#/components/schemas/TinyText'
        created_at:
          $ref: '#/components/schemas/DateTime'
      type: object
    MerchantDebtorResponse:
      properties:
        address_street:
          $ref: '#/components/schemas/TinyText'
        address_house:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        address_postal_code:
          $ref: '#/components/schemas/TinyText'
        address_city:
          $ref: '#/components/schemas/TinyText'
        address_country:
          $ref: '#/components/schemas/TinyText'
        outstanding_amount:
          type: number
          format: float
        outstanding_amount_created:
          type: number
          format: float
        outstanding_amount_late:
          type: number
          format: float
        debtor_information_change_request_state:
          $ref: '#/components/schemas/DebtorInformationChangeRequestState'
        debtor_information_change_request:
          type: array
          items:
            properties:
              name:
                type: string
              house_number:
                type: string
              state:
                type: string
              city:
                type: string
              postal_code:
                type: string
            type: object
        legal_form:
          nullable: true
          $ref: '#/components/schemas/TinyText'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/AbstractMerchantDebtorResponse'
    MerchantDebtorExtendedResponse:
      properties:
        merchant_debtor_id:
          type: integer
        company_id:
          type: integer
        company_uuid:
          $ref: '#/components/schemas/UUID'
        payment_id:
          $ref: '#/components/schemas/UUID'
        is_whitelisted:
          type: boolean
        is_blacklisted:
          type: boolean
        is_trusted_source:
          type: boolean
        crefo_id:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        schufa_id:
          nullable: true
          $ref: '#/components/schemas/TinyText'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/MerchantDebtorResponse'
    MerchantDebtorExternalIdsListResponse:
      properties:
        total:
          type: integer
          minimum: 0
        items:
          type: array
          items:
            type: string
            $ref: '#/components/schemas/TinyText'
      type: object
    MerchantDebtorListResponse:
      properties:
        total:
          type: integer
          minimum: 0
        items:
          type: array
          items:
            type: object
            $ref: '#/components/schemas/MerchantDebtorListItem'
      type: object
    MerchantDebtorListItem:
      title: 'Debtor Basic Info'
      properties:
        debtor_information_change_request_state:
          $ref: '#/components/schemas/DebtorInformationChangeRequestState'
      type: object
      allOf:
        -
          $ref: '#/components/schemas/AbstractMerchantDebtorResponse'
    MerchantDebtorSynchronizationResponse:
      title: 'Merchant Debtor Synchronization'
      properties:
        debtor_company:
          description: 'Updated debtor company data'
          properties:
            name:
              type: string
              example: 'Some company'
            address_house_number:
              type: string
              example: '123'
            address_street:
              type: string
              example: 'Random street'
            address_postal_code:
              type: string
              example: '10356'
            address_city:
              type: string
              example: Berlin
            address_country:
              type: string
              example: Germany
          type: object
        is_updated:
          type: boolean
          example: 'true'
      type: object
    MerchantUserDTO:
      title: 'Merchant User'
      properties:
        uuid:
          nullable: false
          $ref: '#/components/schemas/UUID'
        first_name:
          type: string
          nullable: false
        last_name:
          type: string
          nullable: false
        email:
          type: string
          format: email
          nullable: false
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/MerchantUserPermissions'
          nullable: false
        role:
          properties:
            uuid:
              $ref: '#/components/schemas/UUID'
            name:
              description: 'Role internal name'
              example: Support
              $ref: '#/components/schemas/TinyText'
          type: object
        merchant_company:
          description: 'Merchant the user is logged in to'
          properties:
            name:
              example: 'Billie GmbH'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_house_number:
              example: '4'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_street:
              example: Charlottenstr.
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_city:
              example: Berlin
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_postal_code:
              type: string
              maxLength: 5
              example: '10969'
              nullable: true
            address_country:
              type: string
              maxLength: 2
              nullable: true
          type: object
        tracking_id:
          description: 'ID used for tracking the user for support.'
          type: integer
          nullable: false
        onboarding_state:
          $ref: '#/components/schemas/OnboardingState'
        onboarding_complete_at:
          type: string
          format: date
          example: '2019-03-20'
          nullable: true
      type: object
    MerchantUserEntity:
      properties:
        id:
          type: integer
        uuid:
          $ref: '#/components/schemas/UUID'
        merchant_id:
          type: integer
        signatory_power_uuid:
          $ref: '#/components/schemas/UUID'
        identity_verification_case_uuid:
          $ref: '#/components/schemas/UUID'
        role_id:
          type: integer
        first_name:
          $ref: '#/components/schemas/TinyText'
        last_name:
          $ref: '#/components/schemas/TinyText'
        permissions:
          type: array
          items:
            type: string
      type: object
    OrderPaymentDTO:
      properties:
        amount:
          type: number
          format: float
        created_at:
          $ref: '#/components/schemas/DateTime'
        state:
          type: string
        type:
          type: string
        transaction_uuid:
          $ref: '#/components/schemas/UUID'
        debtor_name:
          type: string
      type: object
    CheckoutAuthorizeOrderResponse:
      title: 'Authorize Checkout Order Response'
      properties:
        state:
          example: created
          $ref: '#/components/schemas/OrderState'
        decline_reason:
          nullable: true
          $ref: '#/components/schemas/OrderDeclineReason'
        debtor_company:
          description: 'Identified company'
          properties:
            name:
              example: 'Billie GmbH'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_house_number:
              example: '4'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_street:
              example: Charlottenstr.
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_postal_code:
              type: string
              maxLength: 5
              example: '10969'
              nullable: true
            address_city:
              example: Berlin
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_country:
              type: string
              maxLength: 2
              nullable: true
          type: object
        debtor_company_suggestion:
          description: 'Debtor company suggestion'
          properties:
            name:
              example: 'Billie GmbH'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_house_number:
              example: '4'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_street:
              example: Charlottenstr.
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_postal_code:
              type: string
              maxLength: 5
              example: '10969'
              nullable: true
            address_city:
              example: Berlin
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_country:
              type: string
              maxLength: 2
              nullable: true
          type: object
      type: object
    OrderInvoiceResponse:
      title: 'Order Entity'
      properties:
        uuid:
          nullable: true
          $ref: '#/components/schemas/UUID'
        invoice_number:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        state:
          nullable: true
          $ref: '#/components/schemas/TinyText'
        payout_amount:
          type: number
          format: float
          nullable: true
        amount:
          type: number
          format: float
        amount_net:
          type: number
          format: float
        amount_tax:
          type: number
          format: float
        outstanding_amount:
          type: number
          format: float
          nullable: true
        pending_merchant_payment_amount:
          type: number
          format: float
          nullable: true
        pending_cancellation_amount:
          type: number
          format: float
          nullable: true
        fee_amount:
          type: number
          format: float
          nullable: true
        fee_rate:
          type: number
          format: float
          nullable: true
        due_date:
          type: string
          format: date
          example: '2019-03-20'
        created_at:
          type: string
          format: date
          example: '2019-03-20'
      type: object
    OrderResponse:
      title: 'Order Entity'
      properties:
        order_id:
          type: string
          example: C-10123456789-0001
          nullable: true
        uuid:
          $ref: '#/components/schemas/UUID'
        state:
          example: created
          $ref: '#/components/schemas/OrderState'
        decline_reason:
          nullable: true
          $ref: '#/components/schemas/OrderDeclineReason'
        amount:
          description: 'Gross amount'
          type: number
          format: float
          example: 123.57
          nullable: false
        amount_net:
          type: number
          format: float
          example: 100.12
          nullable: false
        amount_tax:
          type: number
          format: float
          example: 23.45
          nullable: false
        duration:
          example: 30
          $ref: '#/components/schemas/OrderDuration'
        dunning_status:
          $ref: '#/components/schemas/OrderDunningStatus'
        debtor_company:
          description: 'Identified company'
          properties:
            name:
              example: 'Billie GmbH'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_house_number:
              example: '4'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_street:
              example: Charlottenstr.
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_postal_code:
              type: string
              maxLength: 5
              example: '10969'
              nullable: true
            address_city:
              example: Berlin
              nullable: true
              $ref: '#/components/schemas/TinyText'
            address_country:
              type: string
              maxLength: 2
              nullable: true
          type: object
        bank_account:
          properties:
            iban:
              description: 'Virtual IBAN provided by Billie'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            bic:
              nullable: true
              $ref: '#/components/schemas/TinyText'
          type: object
        debtor_external_data:
          description: 'Data provided in the order creation'
          properties:
            merchant_customer_id:
              example: C-10123456789
              $ref: '#/components/schemas/TinyText'
            name:
              example: 'Billie G.m.b.H.'
              $ref: '#/components/schemas/TinyText'
            address_country:
              type: string
              maxLength: 2
              example: DE
            address_city:
              example: Berlin
              $ref: '#/components/schemas/TinyText'
            address_postal_code:
              type: string
              maxLength: 5
              example: '10969'
            address_street:
              example: 'Charlotten StraÃe'
              $ref: '#/components/schemas/TinyText'
            address_house:
              example: '4'
              $ref: '#/components/schemas/TinyText'
            industry_sector:
              nullable: true
              $ref: '#/components/schemas/TinyText'
          type: object
        delivery_address:
          type: object
          $ref: '#/components/schemas/CreateOrderAddressRequest'
        billing_address:
          type: object
          $ref: '#/components/schemas/CreateOrderAddressRequest'
        created_at:
          $ref: '#/components/schemas/DateTime'
        shipped_at:
          $ref: '#/components/schemas/DateTime'
        debtor_uuid:
          $ref: '#/components/schemas/UUID'
        workflow_name:
          type: string
          example: order_v1
      type: object
    OrderResponseV2:
      title: 'Order Entity'
      properties:
        external_code:
          type: string
          example: C-10123456789-0001
          nullable: true
        uuid:
          $ref: '#/components/schemas/UUID'
        state:
          example: created
          $ref: '#/components/schemas/OrderState'
        decline_reason:
          nullable: true
          $ref: '#/components/schemas/OrderDeclineReason'
        amount:
          $ref: '#/components/schemas/AmountDTO'
        unshipped_amount:
          $ref: '#/components/schemas/AmountDTO'
        duration:
          example: 30
          $ref: '#/components/schemas/OrderDuration'
        debtor_company_name:
          type: string
          example: 'Company name'
        debtor_company_address:
          $ref: '#/components/schemas/Address'
        delivery_address:
          $ref: '#/components/schemas/Address'
        billing_address:
          $ref: '#/components/schemas/Address'
        bank_account:
          properties:
            iban:
              description: 'Virtual IBAN provided by Billie'
              nullable: true
              $ref: '#/components/schemas/TinyText'
            bic:
              nullable: true
              $ref: '#/components/schemas/TinyText'
          type: object
        debtor_external_data:
          description: 'Data provided in the order creation'
          properties:
            merchant_customer_id:
              example: C-10123456789
              $ref: '#/components/schemas/TinyText'
            name:
              example: 'Billie G.m.b.H.'
              $ref: '#/components/schemas/TinyText'
            industry_sector:
              nullable: true
              $ref: '#/components/schemas/TinyText'
          type: object
        debtor_external_address:
          $ref: '#/components/schemas/Address'
        created_at:
          $ref: '#/components/schemas/DateTime'
        invoices:
          type: array
          items:
            $ref: '#/components/schemas/OrderInvoiceResponse'
          nullable: true
      type: object
    BankTransactionDTO:
      properties:
        transaction_uuid:
          $ref: '#/components/schemas/UUID'
        state:
          type: string
        type:
          type: string
        amount:
          type: number
          format: float
        debtor_name:
          type: string
        created_at:
          $ref: '#/components/schemas/DateTime'
      type: object
    SignatoryPowerDTO:
      title: 'Signatory Power Data transfer object'
      properties:
        uuid:
          type: string
        email:
          type: string
          nullable: true
        is_identified_as_user:
          type: boolean
      type: object
    ErrorsObject:
      title: 'API Errors'
      properties:
        errors:
          type: array
          items:
            required:
              - title
              - code
            properties:
              title:
                description: 'Error message'
                type: string
              code:
                description: 'Error code'
                type: string
                nullable: true
              source:
                description: 'Property path where the error occurred, if applicable'
                type: string
                nullable: true
            type: object
      type: object
    GetMerchantPaymentDetailsResponse:
      title: 'Merchant Payments Response'
      properties:
        uuid:
          $ref: '#/components/schemas/UUID'
        amount:
          $ref: '#/components/schemas/Money'
        transaction_date:
          $ref: '#/components/schemas/Date'
        is_allocated:
          type: boolean
        overpaid_amount:
          $ref: '#/components/schemas/Money'
        transaction_counterparty_iban:
          $ref: '#/components/schemas/IBAN'
        transaction_counterparty_name:
          type: string
        transaction_reference:
          type: string
        merchant_debtor_uuid:
          $ref: '#/components/schemas/UUID'
        orders:
          type: array
          items:
            properties:
              uuid:
                $ref: '#/components/schemas/UUID'
              amount:
                $ref: '#/components/schemas/Money'
              mapped_amount:
                $ref: '#/components/schemas/Money'
              outstanding_amount:
                $ref: '#/components/schemas/Money'
              external_id:
                type: string
              invoice_number:
                type: string
            type: object
      type: object
    GetMerchantPaymentsResponse:
      title: 'Merchant Payments Response'
      properties:
        items:
          description: 'Merchant payment item'
          type: array
          items:
            properties:
              uuid:
                $ref: '#/components/schemas/UUID'
              amount:
                $ref: '#/components/schemas/Money'
              overpaid_amount:
                $ref: '#/components/schemas/Money'
              transaction_date:
                $ref: '#/components/schemas/Date'
              is_allocated:
                type: boolean
              transaction_counterparty_iban:
                $ref: '#/components/schemas/IBAN'
              transaction_counterparty_name:
                type: string
              transaction_reference:
                type: string
              merchant_debtor_uuid:
                $ref: '#/components/schemas/UUID'
            type: object
        total:
          description: 'Total number of results'
          type: integer
      type: object
    GetOrderPaymentsResponse:
      title: 'Order Payments Response'
      properties:
        items:
          description: 'Order payment item'
          type: array
          items:
            $ref: '#/components/schemas/OrderPaymentDTO'
        total:
          description: 'Total number of results'
          type: integer
      type: object
      deprecated: true
  responses:
    HtmlDocument:
      description: 'HTML Document'
      content:
        text/html:
          schema:
            type: string
    YamlDocument:
      description: 'YAML Document'
      content:
        text/x-yaml:
          schema:
            type: string
    ServerError:
      description: 'Unexpected Server Error'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorsObject'
    NotFound:
      description: 'Resource Not Found'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorsObject'
    Unauthorized:
      description: 'Unauthorized request or invalid credentials'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorsObject'
    Forbidden:
      description: 'Forbidden Request. The operation cannot be completed.'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorsObject'
    BadRequest:
      description: 'Invalid Request Data'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorsObject'
    ResourceConflict:
      description: 'Resource Already Exists'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorsObject'
  securitySchemes:
    oauth2:
      type: oauth2
      description: |-
        This authentication mechanism is based on the OAuth 2.0 prototocol and requires a Client ID, a Client Secret Key and
        in some cases also a user and password.

        With these credentials, the client should request a token using the `POST /api/v1/oauth/token` endpoint,
        which should be used in the `Authorization` header together with the `Bearer` challenge to authenticate all the requests.

        > Example: `Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`.
      flows:
        password:
          tokenUrl: /oauth/token
          scopes:
            default: default
    apiKey:
      type: apiKey
      description: |-
        This authentication mechanism is based on the `X-Api-Key` header. It has been is **deprecated**, since it is
        less secure because API Keys never expire, in comparison to OAuth tokens.

        > Example: `X-Api-Key: bf428b05-f80e-4ed0-aa79-e0e7bef274a3`.
      name: X-Api-Key
      in: header
tags:
  -
    name: Authentication
    description: |-
      This API uses OAuth 2.0 for secure authentication. 

      Different keys are used for the `sandbox` and `production` environments. Both systems operate completely independent, however both show largely 
      the same response behaviour. The major difference is that sandbox does not trigger any payment events (payout to merchant, repayment 
      by debtors, etc.). To obtain your credentials for both environments please contact Billie's merchant integration support 
      via telephone ( [+49-30-120872485](tel:+4930120872485) ) or email ( pad@billie.io ).

      This authentication mechanism is based on the OAuth 2.0 protocol and requires a Client ID and a Client Secret Key (client credentials).

      Before triggering any API call, a so called JSON web token (JWT) must be requested through the `oauth/token` endpoint described below
      by using your client credentials.
      In all following requests / API calls, this JWT token is used for authorization and must be passed as type "Bearer" token 
      in the Authorization header. Example: `Authorization: Bearer eyJhbGciOiJIUzI...`

      Renewal of the bearer token / JWT:

      Every token expires automatically after 8 hours. After expiration of an existing token a new token must be requested through the 
      `POST oauth/token` endpoint. Implementation best practice is to always try sending API calls first with the previously stored token. 
      Sending API calls with an expired token will be answered with an `HTTP 401` (Unauthorized request or invalid credentials) response.

      After receiving the `401` error you will simply need to request a new token by triggering again the `oauth/token` endpoint. 
      After receiving the new valid token, resend the previously failed API call. This procedure allows for optimal API interaction, 
      ensures reduced system load on both ends, and is easy to implement as you don't need to keep track of token expiration times.

      There is another endpoint available for checking if a token is still valid or not: `GET oauth/token`.
  -
    name: 'Checkout Client'
    description: |-
      To integrate the Billie checkout widget, the following steps are required:

      1. Add the Billie checkout widget bundle to your checkout page
      2. Provide config data _(with the `session_id` from the server-side integration)_
      3. Provide order details and call the mount method
      4. Handle the widget responses
      5. Apply customized styling _[optional]_

      This section provides a step-by-step guide of the setup process.

      ### 1. Include Billie Checkout Widget Bundle into your Checkout Page

      On the checkout page, the following code snippet must be included:
      ```html
      <script>
        var bcwSrc = 'https://static-paella-sandbox.billie.io/checkout/billie-checkout.js';
        (function(w,d,s,o,f,js,fjs){
          w['BillieCheckoutWidget']=o;w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments)};
          w.billieSrc=f;js=d.createElement(s);fjs=d.getElementsByTagName(s)[0];js.id=o;
          js.src=f;js.charset='utf-8';js.async=1;fjs.parentNode.insertBefore(js,fjs);bcw('init');
        }(window,document,'script','bcw', bcwSrc));
      </script>
      ```

      The URL contained in `bcwSrc` specifies whether you are using the Sandbox or Production environment:

      Sandbox: https://static-paella-sandbox.billie.io/checkout/billie-checkout.js

      Production: https://static.billie.io/checkout/billie-checkout.js

      The code snippet above injects our checkout script into the `head` of the webshop. This will download our widget bundle code and enable function calls to interact with the widget.

      It is **strongly recommended** to add this code snippet as high as possible in the document head to ensure that the widget download completes as soon as possible, providing a smooth user experience.

      ### 2. Provide Config Data

      During initialization of the widget, the `session_id` is required. This can be obtained by calling [Checkout Session Create](#operation/checkout_session_create) from your backend and exposing it to the frontend. The `session_id` will be unique per order.
      ```html
      <script>
        const billie_config_data = {
          'session_id': ':YOUR_SESSION_ID',
          'merchant_name': ':YOUR_NAME'
        }
      </script>
      ```
      The `session_id` is needed to approve the order and should be known before mounting the widget.

      Ideally, if you are using server side rendering, this piece of code should be inserted into the document head with prefilled values. Otherwise please ensure there is an [XHR request](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest) as early as possible to your backend to retrieve the `session_id`.

      ### 3. Provide Order Details and Call Mount Method

      Once the user reviews his checkout basket and is ready to pay, he can click on the **Pay with Billie** button. When this happens, Billie expects the `mount` method to be called. The easiest integration option is to inline the function call directly on the button, for example:
      ```html
      <script>
        function payWithBillie() {
          // prepare / get all the data and assign it to billie_order_data, please refer to 3a section
          BillieCheckoutWidget.mount({
            billie_config_data: billie_config_data, 
            billie_order_data: billie_order_data
          })
          .then(function success(ao) {
            // code to execute when approved order
            // console.log('Approved order', ao);
          })
          .catch(function failure(err) {
            // code to execute when there is an error or when order is rejected
            // console.log('Error occurred', err);
          });
        }
      </script>
      <button onclick="payWithBillie()"> Pay with Billie </button>
      ```

      `BillieCheckoutWidget` is a JavaScript promise which can accept optional `then` and `catch` methods. They can be added if the webshop needs to perform an action based on the outcome of the order authorization. 

      The `then` block will receive as parameter the object with the authorised order details.

      The `catch` block will receive the error object with reasons why the order creation was rejected.


      #### 3.a Mount Method Parameters

      `BillieCheckoutWidget.mount` expects two parameters:
      - `billie_config_data` is the object received in step two which includes the `session_id` and `merchant_name`
      - `billie_order_data`  is a collection of order data from the user


      #### 3.b Order Data Object

      The order data object must contain all information about an order, in the following format (required values are **bolded**):

      - `amount` **[object]**
         - `gross` **[float]** `> 0`
         - `tax` **[float]** `>= 0`
         - `net` **[float]** `> 0`
      - `duration` **[integer]** `[7...120]`
      - `delivery_address` **[object]**
        - `street` **[string]** `<= 255 characters`
        - `house_number`  _[string]_ `<= 255 characters`
        - `addition` _[string]_ `<= 255 characters`
        - `city` **[string]** `<= 255 characters`
        - `postal_code` **[string]** `<= 5 characters`
        - `country` **[string]** `2 characters` `^[A-Za-z]{2}$`
      - `debtor_company` **[object]**
        - `name` **[string]** `<= 255 characters`
        - `established_customer` _[boolean]_ 
        - `address_street` **[string]** `<= 255 characters`
        - `address_house_number` **[string]** `<= 255 characters`
        - `address_addition` _[string]_  `<= 255 characters`
        - `address_city` **[string]** `<= 255 characters`
        - `address_postal_code` **[string]** `<= 5 characters`
        - `address_country` **[string]** `2 characters` `^[A-Za-z]{2}$`
      - `debtor_person`  **[object]**
        - `salutation` **[string]** `1 character` `["m" / "f"]`
        - `first_name` _[string]_ `<= 255 characters`
        - `last_name` _[string]_ `<= 255 characters`
        - `phone_number` _[string]_ `>= 5 characters`, `<= 20 characters` `^(\+|\d|\()[ \-\/0-9()]{5,20}$`
        - `email` **[string]** `<= 255 characters` `valid email`
      - `line_items` **[array of objects]**
        - `external_id` **[string]** `<= 255 characters`
        - `title` **[string]** `<= 255 characters`
        - `description` _[string]_ `<= 255 characters`
        - `quantity` **[string]** `>= 1`
        - `category` _[string]_ `<= 255 characters`
        - `brand` _[string]_ `<= 255 characters`
        - `gtin` _[string]_ `<= 255 characters`
        - `mpn` _[string]_ `<= 255 characters`
        - `amount` **[object]**
          - `gross` **[float]** `> 0`
          - `tax` **[float]** `>= 0`
          - `net` **[float]** `> 0`

      Below you can find an example of `orderData` object in javascript
      ```javascript
      const billie_order_data = {
        "amount": { "net": 100, "gross": 100, "tax": 0 },
        "comment": "string",
        "duration": 30,
        "delivery_address": {
          "house_number": "string",
          "street": "string",
          "city": "string",
          "postal_code": "10000",
          "country": "DE",
          "addition": "string"
        },
        "debtor_company": {
          "name": "string",
          "established_customer": false,
          "address_house_number": "string",
          "address_street": "string",
          "address_city": "string",
          "address_postal_code": "10000",
          "address_country": "DE",
          "address_addition": "string"
        },
        "debtor_person": {
          "salutation": "m",
          "first_name": "string",
          "last_name": "string",
          "phone_number": "030 31199251",
          "email": "james.smith@example.com"
        },
        "line_items": [
          {
            "external_id": "string",
            "title": "string",
            "description": "string",
            "quantity": 1,
            "category": "string",
            "brand": "string",
            "gtin": "string",
            "mpn": "string",
            "amount": { "net": 100, "gross": 100, "tax": 0 },
          }
          // , ...
        ]
      };
      ```

      ### 4. Handle Widget Responses

      When submitted, the checkout widget will evaluate if an order with the given data can be accepted. 
      - If an order cannot be accepted, the widget will return the state `declined` with a specified `decline_reason`
      - If an order can be accepted immediately the widget will return the state `authorized`. 
      - It is also possible that some additional checks need to be conducted by Billie in order to accept the order. In this case the widget will return the state `pre_waiting`. 

      In both `authorized` and `pre_waiting` states the `checkout-session-confirm` call must be used to confirm the order creation. 


      #### Response
      After submitting the widget, following data will be returned to either `then` or `catch` block:
      - `state` **[string]** `<= 255 characters`   
      &nbsp;&nbsp;&nbsp;&nbsp;Enum: `authorized` `declined` `pre_waiting`
      - `decline_reason` **[string]** `<= 255 characters`   
      &nbsp;&nbsp;&nbsp;&nbsp;Enum: `validation_error` `risk_policy` `debtor_not_identified` `debtor_address` `risk_scoring_failed` `debtor_limit_exceeded` `unknown_error`
      - `validation_error_source` **[string]**  `<= 255 characters`
      - `debtor_company` **[object]**  
        - `name` **[string]** `<= 255 characters`
        - `address_street` **[string]** `<= 255 characters`
        - `address_house_number` **[string]** `<= 255 characters`
        - `address_city` **[string]** `<= 255 characters`
        - `address_postal_code` **[string]** `<= 5 characters`
        - `address_country` **[string]** `2 characters` `^[A-Za-z]{2}$`

      _**Special note**_  
      * `decline_reason` will be set only when `state` value is `declined`
      * `validation_error_source` will be set only when `decline_reason` value is `validation_error`. We will fill this property with information to help you find which fields are failing validation checks. 

      #### 5. Apply Customized Styling

      It is possible to set some CSS rules to be applied over widget in a simple format. Simply use this snippet:

      ```html
      <style>
        .billie-checkout-modal {
          --c-primary: #FF4338;
        }
      </style>
      ```

      Other available options are:
      - `c-primary` -  color of submit button
      - `s-font` - font size inside the widget 
      - `s-font-small` - font size of small text inside the widget
  -
    name: 'Checkout Server'
  -
    name: 'Back-end Order Creation'
  -
    name: 'Order Management'
  -
    name: 'Invoice Management'
  -
    name: Webhooks
    description: |-
      To send updates on relevant events, Billie PaD sends POST requests to the incoming webhook URL provided by the merchant.
      See "Event Names" section for the list of events that can be communicated via webhooks

      ### Webhook Authentication

      The authentication for webhooks sent from Billie to the merchants incoming webhook URL depends on the merchant specifications 
      and needs, but one possibility is sending the Billie API Key via headers:
      Examples:
       - `Authorization: Basic THE_API_KEY`
       - `X-Api-Key: THE_API_KEY`
       - `X-Another-Custom-Header: THE_API_KEY`

      The merchants will need to verify on their server side the authentication mechanism and credentials.

      ### Webhook Requests

      A `POST` request is sent to the configured merchant Webhook URL with one of the API Key headers mentioned above,
      the `application/json` Content-Type and the following body format:
      ```
      {
          created_at: (datetime)
          event: (string) (event name, -check the following section for more details-)
          order_id: (string)
          order_uuid: (string)
          amount: (string) (optional) (contains sum of paid amounts)
          open_amount: (string) (optional) (contains sum of outstanding amount)
      }
      ```

      ## Event Names
      ### State Transitions

      | Event Name    | Description |
      |---------------|-------------|
      |order_waiting  | Order is moved to waiting state. |
      |order_shipped  | When the order is moved to shipped. |
      |order_paid_out | When the order is paid_out  |
      |order_late     | When the order goes in state late. |
      |order_canceled | When the order is canceled. |

      ### Waiting State

      | Event Name      | Description                                                                                                                |
      |-----------------|----------------------------------------------------------------------------------------------------------------------------|
      | order\_approved | An order that is in waiting state and moves to order_approved.                                                             |
      | order\_declined | An order that is in waiting state and moves to order_declined.                                                             |

      ### Webhooks for Dunning & Collections

      | Event Name       | Description                              |
      |------------------|------------------------------------------|
      | reminder_email_1 | 1st Reminder mail was sent               |
      | reminder_email_2 | 2nd Reminder mail was sent               |
      | dunning_letter_1 | 1st Dunning letter was sent              |
      | dunning_email_1  | 1st Dunning mail was sent                |
      | reminder_email_3 | 3rd Reminder email was sent              |
      | dunning_letter_2 | 2nd Dunning letter was sent              |
      | dunning_email_2  | 2nd Dunning email was sent               |
      | reminder_email_4 | 4th Reminder email was sent              |
      | dca_email        | Handover to collections email was sent   |

      ### Payments 

      | Event Name |  Description |
      |------------|--------------|
      | payment    |The outstanding amount for an order changed. This message is sent for full as well as partial payments for orders|
  -
    name: 'Dashboard Orders'
  -
    name: 'Dashboard Debtors'
  -
    name: 'Dashboard Payments'
  -
    name: 'Dashboard Users'
  -
    name: 'Dashboard Merchants'
  -
    name: Support
  -
    name: 'API Docs'
